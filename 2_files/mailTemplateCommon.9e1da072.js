/*
 * Author: Rohit Dixit/Sumit/Aman
 * Version:v3.2
 * Description: implementation of NC-2358
 */
function checkSenderMail(a){var b=/^([0-9a-zA-Z]([\.\w\-]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,4})$/;return!!b.test(a)}function submitCreateTemplate(a,b){var c=validateMailBody(),d=validateCategory();return isValidCat()?$("#category_error").hide():$("#category_error").show(),commonValidator.isValid(a)&&""==c&&d?($editor.viewSrc(),$n("#bodyContent").val($editor.cInput.val()),b=b+"/"+SOURCE,$n("#mailTemplateName").val(trim($n("#mailTemplateName").val().replace(/\s{2,}/g," "))),void submitFormWithParamsNoIframe(a,b,function(a){resp=a.responseText;try{errorArr=JSON.parse(resp);for(key in errorArr)"name"==key?($n("#mailTemplateName_err").html(errorArr[key]),$n("#mailTemplateName").addClass("msg_errf"),$n("#mailTemplateName_err").addClass("msg_errf")):"subject"==key?($n("#mailTemplateSubject_err").html(errorArr[key]),$n("#mailTemplateSubject").addClass("msg_errf"),$n("#mailTemplateSubject_err").addClass("msg_errf")):"body"==key?($n("#mailTemplateBody_err").html(errorArr[key]),$n("#mailTemplateBody_err").addClass("msg_errf")):"common"==key,$n("#"+key).addClass("msg_errf"),$n("#"+key+"_err").addClass("msg_errf")}catch(b){if(hideLayer(),"excelupload"==SOURCE)return $n("#successMsgMailTemplate .etxt").html("<strong>SUCCESS!</strong> Mail Template successfully added.</span>"),$n("#successMsgMailTemplate").addClass("psuccess"),!1;if($n("#mailTemplateId")){var c=document.querySelector(".psuccess"),d=document.querySelector(".perror");c&&c.remove(),d&&d.remove(),$n("#mailTemplateTuples").html(resp),attachEventOnEdit(),attachEventOnCreate(),attachEventOnDelete()}}})):(""!=c?($n("#mailTemplateBody_err").show(),$n("#mailTemplateBody_err").html(c)):($n("#mailTemplateBody_err").html(""),$n("#mailTemplateBody_err").hide()),d?$n("#category_err").hide():$n("#category_err").show(),!1)}function checkExcelMailTemplateName(){return!$n("#saveAsNew").currObj().checked||""!=$n("#templateName").val()}function validateEmail(a){if(""!=a){for(var b=a.split(","),c=0;c<b.length;c++)if(!checkEmail($.trim(b[c])))return!1;return!0}}function submitSendEmailPreview(a,b){hideLayer(),submitSendEmail(a,b)}function showSendEmailStatus(a){status=JSON.parse(a)}function validateTemplateName(){return 1!=$n("#chkSaveTemplate").currObj().checked&&"on"!=$n("#chkSaveTemplate").currObj().checked||""!=$n("#mailTemplateName").val()}function checkEmail(a){var b=/^([0-9a-zA-Z]([\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,4})$/;return!!b.test(a)}function validateSendEmail(a,b,c){var d=validateProjectList(),e=validateMailBody();if($n("#templateName").length&&$n("#templateName").attr("rel","required:1001,custom:3003"),applicationCount>0&&(assignValuestoHidden("",""),assignValuestoHidden("","",fieldsPrefix)),applicationCount>0&&!validateDownloadForm())return!1;d?$n("#SendMailProjectList_err").hide():$n("#SendMailProjectList_err").show(),""==e&&$n("#mailTemplateBody_err").hide(),$n("#templateName").length&&$n("#templateName").attr("rel",""),$n("#to_sendMailcc_err").length&&($n("#to_sendMailcc_err").html(""),$n("#to_sendMailcc_err").hide()),$n("#to_sendMail_err").length&&($n("#to_sendMail_err").html(""),$n("#to_sendMail_err").hide());var f=!1,g=!1,h=!1,i=!1;if($("#attachprFieldsExcl").length&&(f=!!$("input[name=attachprFieldsExcl]").is(":checked")),$("#attachCvAsZip").length&&(g=!!$("input[name=attachCvAsZip]").is(":checked")),$("#fileKeysAttached").length&&(h=""!=$("#fileKeysAttached").val()),"true"==c&&(f||g||h||"1"!=isForwardAction||(i=!0)),i)0==$("#ltDiv").length&&($("body").prepend($("<div/>",{id:"ltDiv"})),$("body").prepend($("<div/>",{id:"attachWarningCont"})),warningContent='<a id="closeWarning" href="javascript: void(0);" class="closeWarning close_btn"></a> <div class="lbdr6 attachWarningDiv" style="background:white"> <div class="bb2 pb1"> <div class="lb_head"> <h2>Confirm Send</h2> </div></div><div class="l_share_cont lb_cont cle"> <div class="eduHead pt5 pb10">Are you sure you want to send this mail without any attachments?</div></div><div class="p15 cle pt25 pb25 l_foot"><a href="javascript:void(0);" id="sendForwardnoAttach" class="red_btn mr15 fl" onclick="validateSendEmail(\'frmSendMail\',\''+b+'\')">Send</a><a href="javascript:void(0);" id="cancelWarning" class="red_btn fl">Cancel</a></div></div>',attachWarningLBCont=$("#attachWarningCont").html(warningContent),parseScript("attachWarningCont"),$("body").on("click","#sendForwardnoAttach",function(){$("#closeWarning")[0].click()}),$("body").on("click","#cancelWarning",function(){$("#closeWarning")[0].click()})),lightBox({contId:"attachWarningCont",reset:!1,close:"closeWarning",contWidth:350,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1"});else{if(!commonValidator.isValid(a)||""!=e)return""!=e?($n("#mailTemplateBody_err").show(),$n("#mailTemplateBody_err").html(e)):($n("#mailTemplateBody_err").html(""),$n("#mailTemplateBody_err").hide()),!1;if(d){if(!($n("#saveAsNew").length>0&&$n("#saveAsNew").isChecked()))
//submitSendEmail(formId, url);
return(0!=$n("#maskingDetails").length&&$n("#maskingDetails").isChecked()||0!=$n("#shouldAddSummary").length&&$n("#shouldAddSummary").isChecked()||0!=$n("#shouldAddLogo").length&&$n("#shouldAddLogo").isChecked())&&0==isGreaterThan100&&templateType==forwardMailType?openMaskingPreviewLightBox():submitSendEmail(a,b),!0;$n(this).ajaxReq({type:"get",async:"true",datatype:"text",url:checkIfNameExists+"/"+$n("#templateName").val(),success:function(c){
//submitSendEmail(formId, url);
return respObj=JSON.parse(c),1==respObj.err?($n("#templateName_err").html(respObj.errMsg),$n("#templateName_err").addClass("msg_errf"),$n("#templateName_err").show(),!1):((0!=$n("#maskingDetails").length&&$n("#maskingDetails").isChecked()||0!=$n("#shouldAddSummary").length&&$n("#shouldAddSummary").isChecked()||0!=$n("#shouldAddLogo").length&&$n("#shouldAddLogo").isChecked())&&0==isGreaterThan100&&templateType==forwardMailType?openMaskingPreviewLightBox():submitSendEmail(a,b),!0)}})}}}function openMaskingPreviewLightBox(a){assignValuestoHidden("","","summary"),void 0==a?previewFlag=!1:"previewMailFromCreateLB"==$n(a.target).attr("id")&&(previewFlag=!0);var b,c,d=document.createElement("script"),e=$("input[name=summaryfieldOrder").val(),f=$.trim($("input[name=summaryExcelTemplateId]").val()),g=$("#shouldAddSummary").is(":checked")?"1":"0",h=$("#shouldAddLogo").is(":checked")?"1":"0",i=$("#candidateProfileIdForSendMail").val(),j=$("#applicationId").val(),k=$('input[name="summaryTrackerLabels"]').val()||"",l=$('input[name="projectId"]').val()||"",m="&applicationId="+j+"&candidateProfileIdForSendMail="+i+"&summaryFieldOrder="+e+"&summaryExcelTemplateId="+f+"&sltEmail="+$("#sltEmail").val()+"&templateType="+$("#templateType").val()+"&maskingDetails="+$n("#maskingDetails").val()+"&shouldAddSummary="+g+"&shouldAddLogo="+h+"&summaryTrackerLabels="+k+"&projectId="+l;
//new masking method changes
DataForMasking!=m&&(newMaskingId=""),""==newMaskingId?(showLoader("_bodyContent",!1),$n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:maskingPreviewLBURL,data:m,success:function(a){$n("#maskingPreviewLB").html(a),c=$n("#maskingPreviewLB"),b=c.childrens("script"),d.setAttribute("src",b.attr("src")),document.body.appendChild(d),$n("#maskingPreviewLB").append(d),
// parseScript('maskingPreviewLB');
lightBox({trigger:"sendMailBtn",// Button Id which will open lightbox
contId:"maskingPreviewLB",// lighbox container Id
close:"abortMasking",// close Btn Id
contWidth:600,// lightbox container width
ecp:!0,// Hide lightbox by pressing escape key if set it to True else False
fixedLayer:!0,// Keep the lightbox container on center of the screen if set it to True else False
returnFocus:!0}),hideLoader(),newMaskingId=$("#newMaskingBatchId").val(),maskingBatchId=newMaskingId,$("#maskingBatchId").val(newMaskingId)}})):$n(this).ajaxReq({type:"get",datatype:"text",url:maskingPreviewLBURL+"?maskingBatchId="+newMaskingId,success:function(a){$n("#maskingPreviewLB").html(a),c=$n("#maskingPreviewLB"),b=c.childrens("script"),d.setAttribute("src",b.attr("src")),document.body.appendChild(d),$n("#maskingPreviewLB").append(d),
// parseScript('maskingPreviewLB');
lightBox({trigger:"sendMailBtn",// Button Id which will open lightbox
contId:"maskingPreviewLB",// lighbox container Id
close:"abortMasking",// close Btn Id
contWidth:600,// lightbox container width
ecp:!0,// Hide lightbox by pressing escape key if set it to True else False
fixedLayer:!0,// Keep the lightbox container on center of the screen if set it to True else False
returnFocus:!0}),hideLoader(),newMaskingId=$("#newMaskingBatchId").val(),maskingBatchId=newMaskingId,$("#maskingBatchId").val(newMaskingId)}}),DataForMasking=m}function getResdexSourceCount(){var a=[];a="function"==typeof getCheckedProfiles?getCheckedProfiles():[document.querySelector('input[name="profileId"]').value];var b=0;return a.forEach(function(a){var c=document.querySelector("#profileIds_"+a+"_source");c&&"RESDEX"==c.value&&b++}),b}function submitSendEmail(a,b){var c={};if(c.fields={withCredentials:!0},$editor.viewSrc(),$n("#bodyContent").val($editor.cInput.val()),$n("#contactListJson").length&&"[]"!=$n("#contactListJson").val()&&""!=$n("#contactListJson").val()){var d=JSON.parse($n("#contactListJson").val());for(key in newContacts)d[key]=newContacts[key];$n("#newContactObj").val(JSON.stringify(d))}showLoader("_bodyContent",!1);var e="";if(bulkInterview===!0){if($("#sameStart").is(":checked"))var f="",g="";else{var f=$("#hid_interviewDurationDD").val().split("_")[1];if($("#breakTimeChk").is(":checked"))var g=$("#hid_breakDurationDD").val().split("_")[1];else var g=""}var h=$("#inp_startTimeDD").val(),i=$("#inp_endTimeDD").val();e="&interviewStartTime="+h+"&interviewEndTime="+i+"&interviewDuration="+f+"&breakDuration="+g}var j=$('input[name="projectId"]').val()||"",k="&resdexSourceCount="+getResdexSourceCount(),l="&shouldAddLogoInEmail="+$n("#chkAddLogoInEmail").isChecked(),m="&includeRecruiterSignature=false";$("#includeSignature")&&$("#includeSignature")[0]&&$("#includeSignature")[0].checked&&(m="&includeRecruiterSignature=true");var n=window.selectedTokenMapping,o=$('input[name="applicationId"]').val();if(!Object.keys(window.selectedTokenMapping).length&&o&&applicationTokenOnPage){var p=o.split(",");n={},p.forEach(function(a){n[a]=applicationTokenOnPage[a]})}formData=getFormValues(a),$n(this).ajaxReq({type:"post",url:b,crossDomain:!0,xhrFields:{withCredentials:!0},data:formData+e+m+k+l+"&projectId="+j+(window.selectedTokenMapping?"&authTokenMapping="+JSON.stringify(n):"&token="+window.pageToken),success:function(a){errorArr=JSON.parse(a),hideLoader();try{if(0==errorArr.status)for(key in errorArr)"subject"==key?($n("#mailTemplateSubject_err").html(errorArr[key]),$n("#mailTemplateSubject").addClass("msg_errf"),$n("#mailTemplateSubject_err").addClass("msg_errf")):"body"==key?($n("#mailTemplateBody_err").html(errorArr[key]),$n("#mailTemplateBody_err").addClass("msg_errf"),$n("#mailTemplateBody_err").show()):"name"==key?($n("#mailTemplateName_err").html(errorArr[key]),$n("#mailTemplateName_err").addClass("msg_errf"),$n("#mailTemplateName_err").show()):"project"==key?($n("#SendMailProjectList_err").show(),$n("#SendMailProjectList_err").html(errorArr[key])):"email"==key?($n("#to_sendMail_err").show(),$n("#to_sendMail").addClass("msg_errf"),$n("#to_sendMail_err").addClass("msg_errf"),$n("#to_sendMail_err").html(errorArr[key])):"emailcc"==key?($n("#to_sendMailcc_err").show(),
// $n("#to_sendMail").addClass('msg_errf');
$n("#to_sendMailcc_err").addClass("msg_errf"),$n("#to_sendMailcc_err").html(errorArr[key])):"email_from"==key&&($n("#from_sendMail_err").show(),$n("#from_sendMail").addClass("msg_errf"),$n("#from_sendMail_err").addClass("msg_errf"),$n("#from_sendMail_err").html(errorArr[key])),$n("#"+key).addClass("msg_errf"),$n("#"+key+"_err").addClass("msg_errf");else 1==errorArr.status?(4==$n("#frmSendMail #templateType").val()&&$n("#profileListContainer").length>0&&updateTotalPage(pageChangeAjaxUrl,facetFormId,profileListingDivId),0==bulkInterview?($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html(errorArr.msg)):($n("#statusChangeMessageDiv").hide(),bulkForwardToHMSuccess()),
//  $n('#errMsgBxForSendMail').html('');
//  $n('#errMsgBxForSendMail').hide();
errorArr.error?(hideLayer(),showErrLightBox(errorArr)):hideLayer()):(0==bulkInterview?($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html(errorArr.msg)):($n("#statusChangeMessageDiv").hide(),bulkForwardToHMSuccess()),errorArr.error?(hideLayer(),showErrLightBox(errorArr)):hideLayer())}catch(b){}}}),1==bulkInterview&&$n("#statusChangeMessageDiv").hide()}function showErrLightBox(a){$n("#downloadResumeErrorBox").html('<div id="downloadResumeError" class="errorLbwrap"><div class="drErrHdr"><span>Resdex CVs cannot be forwarded</span><a onclick="hideLayer();" href="javascript: void(0);" class="drErrCloseBtn" >&#10005;</a></div><div class="drErrBody"><span>'+a.error+'</span></div><div class="drErrFooter"> <a onclick="hideLayer();" href="javascript:void(0)" class="drErrCancelBtn">OK</a></div></div>'),lightBox({trigger:"download",contId:"downloadResumeErrorBox",close:"closeBtn7",contWidth:500,ecp:!0,fixedLayer:!0,returnFocus:!1,fLink:"flink1"})}function bulkForwardToHMSuccess(){$("#bulkStatusMsgBox .etxt span").html("Mail has been sent"),$("#calendarInviteEnableForward").hide()}function validateProjectList(){return""!=$n("#hid_SendMailProjectList").val()}function validateCategory(){return 2!=$n("#frmSendMail #templateType").val()||0!=$n("#tempCat").val()&&"NULL"!=$n("#tempCat").val()}function isValidCat(){return $("#tempCat").length&&"0"!=$("#tempCat").val()}function attachEventOnCreate(a){$n("#"+a).addEvent("click",createMailTemplateNew)}function createMailTemplateNew(){$n("#mailTemplateId")&&$n("#mailTemplateId").val(""),createTemplateTypeOptionLB(),$n("#templateTypeOptionFirst").currObj().checked=!0}function createTemplateTypeOptionLB(){lightBox({contId:"templateOptions",close:"closeBtn5",contWidth:264,ecp:!0,fixedLayer:!0,returnFocus:!1,fLink:"flink1"})}function attachEventOnTemplateOptionNext(){var a;$n("#tempTypeNext").addEvent("click",function(){$n("input[name='tempType']").each(function(){$n(this).isChecked()&&(a=$n(this).val())}),"1"==a||"5"==a?(window.createTemplate(a),hideLayer()):(hideLayer(),$n("#mailTemplateId")&&$n("#mailTemplateId").val(""),createMailingTemplate(a),createMailTemplateDD("mailTemplatesStr"))})}function createMailingTemplate(a){$n(this).ajaxReq({type:"get",async:"true",datatype:"text",url:createMailTemplate+"?tempType="+a+"&mailTemplateId=''",success:function(b){if($n("#createNewMailTemplate").html(b),parseScript("createNewMailTemplate"),lightBox({contId:"create_new",close:"closeBtn",firstFocus:"forFocus",contWidth:820,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",hideCallBack:function(){$n("#saveAsNewTemplate").length&&$n("#saveAsNewTemplate").isChecked()&&($n("#saveAsNewTemplate").currObj().checked=!1),$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),$n("#templateType").val(a),$n("#fromListingPage").val(1),"listing"==SOURCE?createMailTemplateDD("mailTemplatesStr"):$n("#existingTemplateList").hide(),tagManagerMailTemplate(),showHideCategory(),changeHeading(a),createMailTemplateValidation(),"4"==a){/*initializeDropDowns();*/
var c=" "+$n("#templateJson").val(),d=" "+$n("#preSelected").val();generateDropDown(trim(c),trim(d))}"excelupload"==SOURCE&&(commonValidator.fillVal({senderMailId:$n("#senderMailIdExcel").val()}),commonValidator.fillVal({mailTemplateName:""}),$n("#mailTemplateSubjectExcel").val()!=$n("#mailTemplateSubjectExcel").attr("placeholder")&&commonValidator.fillVal({mailTemplateSubject:$n("#mailTemplateSubjectExcel").val()}))}})}
//Removed due to download revamp
/* function addEventOnDownloadBulkProfileButton() {
	$n('#download.red_btn.center').addEvent('click', function () {
		var submitted = submitSrpDownloadForm('downloadSrpForm', downloadCandidateProfile);
		if (submitted) {
			hideLayer();
		}
	});
} */
function showHideSendEmailCheckBox(){1==$n("#chkSaveTemplate").currObj().checked?($n("#mailTemplateName").attr("rel","required:1001,custom:3003,charRange:1008"),$n("#mailTemplateNameDiv").show()):($n("#mailTemplateName").removeAttr("rel"),$n("#mailTemplateNameDiv").hide())}function getSendEmailLightBoxForListing(a,b,c,d){$n("#fields").length&&$n("#fields").val("");var e=getCheckedProfiles(),f=e.toString(),g=getCheckedProfilesApplicationIds(e),h=g.toString(),i=getCheckedApplicationTokens();c="undefined"!=typeof getCheckedReqIdsOnPage?getCheckedReqIdsOnPage():$("input[type='hidden'][name='projectId']").val(),getSendEmailLightBox(a,b,h,f,c,"","","","","","","",d,i)}function initialiseSignPopup(){$(document).on("click","#signLink",function(){$("#sigBodyEditor_err").html(""),lightBox({contId:"ltBoxForSignature",close:"forwardRestrictionBt",contWidth:543,ecp:!0,fixedLayer:!0,returnFocus:!1,fLink:"flink1",reset:!0,hideLayer:function(){$(".sigEditorCont").html("")}}),$(".sigEditorCont").html("<div id='sigBodyEditor'></div>"),$editor1=new editorWindow,$editor1.createEditor(AC_CSS_PATH+"/editor.css","","sigBodyEditor","$editor1"),$("#sigBodyEditor").css({height:"100px"}),$(".bgwht").css({height:"140px"}),$("#updateSigBtn").off("click"),$("#updateSigBtn").click(function(){$("#sigBodyEditor_err").html("");var a=$editor1.objContDoc.body.innerText,b=validateSignDesc(a,"Add");if(b)$("#sigBodyEditor_err").html(b);else{var c=JSON.stringify({content:$editor1.objContDoc.body.innerHTML,name:"default-rms"});$.ajax({type:"post",headers:{Accept:"application/json","Content-Type":"application/json"},datatype:"text",url:"/signatures",data:c,success:function(){hideLayer(),$(".signDiv ")[0].innerHTML="<input type='checkbox' checked='true' id='includeSignature'> Include signature"}})}})})}function getSendEmailLightBox(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(e="undefined"!=typeof getCheckedReqIdsOnPage?getCheckedReqIdsOnPage():$("input[type='hidden'][name='projectId']").val(),void 0!=g&&""!=g||(g=0),void 0!=h&&""!=h||(h=0),void 0!=i&&""!=i||(i=0),j=!!j&&j,$n("#sltType").length>0)var o=$n("#sltType").val();else var o=$n("#facetForm input[name='slt']").val();var p="";if("1"==k){if($("#sameStart").is(":checked"))var q="",r="";else{var q=$("#hid_interviewDurationDD").val().split("_")[1];if($("#breakTimeChk").is(":checked"))var r=$("#hid_breakDurationDD").val().split("_")[1];else var r=""}var s=$("#inp_startTimeDD").val(),t=$("#inp_endTimeDD").val();p="&interviewStartTime="+s+"&interviewEndTime="+t+"&interviewDuration="+q+"&breakDuration="+r,bulkInterview=!0}else bulkInterview=!1;var u=null;if(n)u=n;else if(window.selectedTokenMapping)u=selectedTokenMapping;else if(c&&window.pageToken){var v="";$('input[id^="tupleAuthProfileToken_"]')&&(v=$('input[id^="tupleAuthProfileToken_"]').val()),u={},u[c]=window.pageToken,u[profileId]=v}var w=0;(window.location.href.indexOf("inbox")>-1||window.location.href.indexOf("candidate/doSearch")>-1||window.location.href.indexOf("profile/reportApplicationCount")>-1)&&(w=1),showLoader("_bodyContent",!1),$n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:b,data:"isFwdHM="+j+"&mailType="+a+"&applicationId="+c+"&projectId="+e+"&profileId="+d+"&toShowAllResults="+f+"&slt="+o+"&isCalendarInvite="+g+"&showLink="+h+"&isSingleForward="+i+"&batchCalendarInviteId="+l+(m&&m.length?"&inboxType="+m:"")+p+"&isBulkForward="+w+(u&&Object.keys(u).length?"&authTokenMapping="+JSON.stringify(u):""),success:function(b){makeAjax=!0,hideLoader();var f=JSON.parse(b);0==f.status?($n("#downloadError_msg").html("Error in forwarding"),$n("#ltBoxTextForForwardRestrictionMsg").html(" Forward Failed. You cannot forward more than "+b.totalQuotaForForward+" resumes per day through bulk forward . Quota consumed till now "+(b.totalQuotaForForward-b.count)),lightBox({contId:"ltBoxTextForForwardRestriction",close:"forwardRestrictionBt",contWidth:543,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",reset:!0})):($n("#sendEmailBlock").html(f.lightBoxSendEmail),initialiseSignPopup(),f.lightBoxUpdatePassword?($n("#updatePasswordContainer").html(f.lightBoxUpdatePassword),lightBox({contId:"updatePasswordContainer",close:"lbClose",firstFocus:"forFocus",contWidth:556,ecp:!0,fixedLayer:!1,returnFocus:!1})):(lightBox({contId:"create_new",close:"closeBtn",firstFocus:"forFocus",contWidth:820,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",hideCallBack:function(){$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),$n("#candidateProfileIdForSendMail").val(d),parseScript("sendEmailBlock"),a==jobMailType&&getSendEmailProjectList(e),$n("#applicationId").val(c),getSendEmailMailTemplateList(a),tagManagerMailTemplate(),attachCommonValidation(),"4"==a&&(
//initializeDropDowns();
$n("#selFields").length&&$n("#selFields").html(""),$n("#fields").length&&$n("#fields").val(""),$n("#formIdForDownloadTrackerValidation").val("frmSendMail"),$n("#submitButtonForDownloadTrackerValidation").val("sendMailBtn"),createTemplateValidationForDownload()),$n("#downloadTemplateSelect").length>0&&$n("#downloadTemplateSelect").html(""),generateDropDown(downloadTemplateJson,preSelTemp,"forward"),generateDropDown(downloadTemplateJson,preSelTemp,"forward","summary"),void 0!=username&&""!=username&&($n("#senderMailCaption").html("Reply to Mail Id"),$n("#senderMailIdMsg").hide(),$n("#senderMailId").val(username),$n("#senderMailId").attr("disabled",!0)),
//openForwardMailLB();
"undefined"!=typeof jQuery&&$(".expand").trigger("click")))}})}
//Open forward lightbox after update very delicate
function createSendEmailLightBoxAfterUpdate(a,b,c){/*var candidateProfileIdArr = [], 
        applicationIdArr = [], 
        applicationId = "", */
var d="";/*if (typeof(getCheckedProfiles) != "undefined") {
        candidateProfileIdArr = getCheckedProfiles();    
    } else if ($n('input[name="profileId"]').length) {
        candidateProfileIdArr = $n('input[name="profileId"]').val();
    }

    candidateProfileId = candidateProfileIdArr.toString();

    if (typeof(getCheckedProfilesApplicationIds) != "undefined") {
        applicationIdArr = getCheckedProfilesApplicationIds(candidateProfileIdArr);
    } else if ($n('input[name="applicationId"]').length) {
        applicationIdArr = [$n('input[name="applicationId"]').eq(1).val()];   
    }

    applicationId = applicationIdArr.toString();*/
d="undefined"!=typeof projectId_gl?projectId_gl:"",lightBox({contId:"create_new",close:"closeBtn",firstFocus:"forFocus",contWidth:820,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",hideCallBack:function(){$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),$n("#candidateProfileIdForSendMail").val(c),parseScript("sendEmailBlock"),a==jobMailType&&getSendEmailProjectList(d),$n("#applicationId").val(b),getSendEmailMailTemplateList(a),tagManagerMailTemplate(),attachCommonValidation(),"4"==a&&(
//initializeDropDowns();
$n("#formIdForDownloadTrackerValidation").val("frmSendMail"),$n("#submitButtonForDownloadTrackerValidation").val("sendMailBtn"),createTemplateValidationForDownload()),$n("#downloadTemplateSelect").length>0&&$n("#downloadTemplateSelect").html(""),generateDropDown(downloadTemplateJson,preSelTemp,"forward"),generateDropDown(downloadTemplateJson,preSelTemp,"forward","summary"),void 0!=username&&""!=username&&($n("#senderMailCaption").html("Reply to Mail Id"),$n("#senderMailIdMsg").hide(),$n("#senderMailId").val(username),$n("#senderMailId").attr("disabled",!0)),
//open forwardLB after password update
"undefined"!=typeof jQuery&&$(".expand").trigger("click")}function openForwardMailLB(a,b,c,d){
//$n('#create_new').show();
createSendEmailLightBoxAfterUpdate(b,c,d),"closeButton"==a&&($n("#mailServer").hide(),$n("#senderMailCaption").html("Receive Reply On"),$n("#senderMailIdMsg").show(),$n("#senderMailId").removeAttr("disabled"),$n("#senderMailId").val(fromemail),$n("#defaultMailServer").attr("checked",!0))}function getSendEmailMailTemplateList(a){prefilledMailTemplates=JSON.parse($n("#mailTemplateListJson").val());var b=$("#mailTemplateList").length&&$("#mailTemplateList").data("inboxtype");if(mailTemplateListObj={id:{mailTemplateList:[prefilledMailTemplates,mailTemplateIdDefault]},maxHeight:400,placeHolderText:"Select Template",onClickReq:function(c,d){getMailTemplateDataById(d,a,b)}},new DD(mailTemplateListObj),$n("#contactListJson").val()&&0!=JSON.parse($n("#contactListJson").val()).length)var c=JSON.parse($n("#contactListJson").val());var d=[];if($n("#interviewerEmailIds").val())try{0==!JSON.parse($n("#interviewerEmailIds").val()).length&&(d=JSON.parse($n("#interviewerEmailIds").val()))}catch(e){d=[]}contactListObj={id:{contactLst:[c,d]},maxHeight:400,checkBox:!0,placeHolderText:"Select Contact",noDataTxt:"Not Present in Contact List. Type Email Id and press 'Enter Key' to Add the List",onClickReq:function(a,b){}},DD.ChkBoxContr.contactLst={},contactDD=new DD(contactListObj),attachEventForTag("contactLst")}/* Function Name: getMailTemplateDataById
 * Created By : Piyush Handa
 * Description: In order to get mail template by template id.
 * 
 */
function getMailTemplateDataById(a,b,c){if("1"==listingType)var d=getCheckedProfiles(),e=getCheckedProfilesApplicationIds(d),f=e.toString();f||(f=$n("#applicationId").val()),simpleText=!1;var g=!1,h="";h="undefined"!=typeof getCheckedReqIdsOnPage?getCheckedReqIdsOnPage():$("input[type='hidden'][name='projectId']").val();var i="",j="",k="",l="",m="",n="";if(4==b&&(simpleText=$n("#simpleText").val()),$n("#hid_contactLst").length&&""!=$n("#hid_contactLst").val()&&(j=JSON.parse($n("#hid_contactLst").val())),$n("#hid_ccObjectList").length&&""!=$n("#hid_ccObjectList").val()&&(n=JSON.parse($n("#hid_ccObjectList").val())),$n("#chkSendCalendarInvite").length>0?(g=!0,$n("#mailTemplateSubject").length>0&&(i=$n("#mailTemplateSubject").val()),"true"==simpleText?$n("#hid_contactLst").length&&""!=$n("#hid_contactLst").val()&&(j=JSON.parse($n("#hid_contactLst").val())):($n("#toId").length>0&&(k=$n("#toId").val()),$n("#toId").length>0&&(l=$n("#ccId").val()))):($n("#toId").length>0&&(k=$n("#toId").val()),$n("#toId").length>0&&(l=$n("#ccId").val())),$n("#mailTemplateSenderName").length>0)var m=$n("#mailTemplateSenderName").val();
//  alert(""+mailType+"asdasdf"+simpleText);
if($n("#sltType").length>0)var o=$n("#sltType").val();else var o=$n("#facetForm input[name='slt']").val();$n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:sendEmailTemplateData,data:"projectId="+h+"&templateId="+a+"&mailType="+b+"&slt="+o+"&applicationId="+f+"&calenderInvite="+g+"&subject="+i+"&simpleText="+simpleText+"&maskingBatchId="+maskingBatchId+(c&&c.length?"&inboxType="+c:"")+"&candidateProfileIds="+d+"&username="+username+(window.selectedTokenMapping?"&authTokenMapping="+JSON.stringify(window.selectedTokenMapping):"&token="+window.pageToken),success:function(a){$n("#mailSubjectBody").html(a),parseScript("mailSubjectBody");var c=" "+$n("#templateJson").val(),d=" "+$n("#preSelected").val();if("4"==b){if($n("#contactListJson").val()&&0!=JSON.parse($n("#contactListJson").val()).length)var e=JSON.parse($n("#contactListJson").val());g?"true"==simpleText?contactListObj={id:{contactLst:[e,j]},maxHeight:400,checkBox:!0,placeHolderText:"Select Contact",noDataTxt:"Not Present in Contact List. Type Email Id and press 'Enter Key' to Add the List",onClickReq:function(a,b){}}:($n("#toId").val(k),$n("#ccId").val(l)):contactListObj={id:{contactLst:[e,j]},maxHeight:400,checkBox:!0,placeHolderText:"Select Contact",noDataTxt:"Not Present in Contact List. Type Email Id and press 'Enter Key' to Add the List",onClickReq:function(a,b){}},DD.ChkBoxContr.contactLst={},contactDD=new DD(contactListObj),attachEventForTag("contactLst"),""!=n?generateCcContactList(1,n):generateCcContactList(2,"")}""!=trim(c)&&(
//initializeDropDowns();   Removed due to earlier flow of initialization
createTemplateValidationForDownload(),generateDropDown(trim(c),trim(d),"forward"),generateDropDown(trim(c),trim(d),"forward","summary")),tagManagerMailTemplate(),void 0!=username&&""!=username?($n("#senderMailCaption").html("Reply to Mail Id"),$n("#senderMailIdMsg").hide(),$n("#senderMailId").val(username),$n("#senderMailId").attr("disabled",!0)):($n("#senderMailCaption").html("Receive Reply On"),$n("#senderMailIdMsg").show()),$n("#toId").val(k),$n("#ccId").val(l),""!=l&&showCcContacts(),""!=m&&$n("#mailTemplateSenderName").val(m),"undefined"!=typeof jQuery&&($(".expand").trigger("click"),$(".attachDoc").removeClass("dspN"))}})}function getCompanyNameStatus(a){$n(this).ajaxReq({type:"get",async:"true",datatype:"text",url:projectShowHiringForSettingsUrl+"?projectId="+a.trim(),success:function(a){showName=JSON.parse(a),$("#showCompanyName").prop("checked",!!showName.showHiringFor)}})}/* Function Name: getSendEmailProjectList
 * Created By : Piyush Handa
 * Description: In order to get project list box 
 * populated with project names.
 */
function getSendEmailProjectList(a){prefilledProjects=JSON.parse($n("#projectListJson").val()),SendMailProjectListprojectListObj={id:{SendMailProjectList:[prefilledProjects,a]},maxHeight:200,placeHolderText:"Select Requirement",onClickReq:function(a,b){isClientConsultant&&getCompanyNameStatus(b),enableDisablePreview(),getJobListByProjectId(b)}},a&&getJobListByProjectId(a),new DD(SendMailProjectListprojectListObj)}function getJobListByProjectId(a){$n("#SendMailjobList").ajaxReq({type:"get",async:"true",datatype:"text",url:sendEmailJobsList+"?projectId="+a+(window.selectedTokenMapping?"&authTokenMapping="+JSON.stringify(window.selectedTokenMapping):""),success:function(a){prefilledJobsbyProject=JSON.parse(a),populateJobListbox(prefilledJobsbyProject)}})}function generateCcContactList(a,b){if(ccObjSelected=b,1===a&&($n("#contactLst").next()&&$n("#contactLst").next().next()&&$n("#contactLst").next().next().next()&&$n("#contactLst").next().next().next().css({bottom:"2px"}),$n(".ccText").hide(),$n("#contactLstCc").show()),$n("#contactListJson").val())var c=JSON.parse($n("#contactListJson").val());contactListObj={id:{ccObjectList:[c,ccObjSelected]},maxHeight:400,checkBox:!0,placeHolderText:"Select Contact",noDataTxt:"Not Present in Contact List. Type Email Id and press 'Enter Key' to Add the List",onClickReq:function(a,b){}},contactCcDD=new DD(contactListObj),attachEventForTag("ccObjectList")}function showCcContacts(){$n("#contactLst").next()&&$n("#contactLst").next().next()&&$n("#contactLst").next().next().next()&&$n("#contactLst").next().next().next().css({bottom:"2px"}),$n(".ccText").hide(),$n("#contactLstCc").show()}function populateJobListbox(a){SendMailjobListObj={id:{SendMailjobList:[a]},maxHeight:200,placeHolderText:"Select Job",onClickReq:function(a,b){}},new DD(SendMailjobListObj)}function editMailTemplate(){$n(this).ajaxReq({type:"get",async:"true",datatype:"text",url:createMailTemplate+"?mailTemplateId="+$n("#mailTemplateId").val()+"&action=edit",success:function(a){$n("#createNewMailTemplate").html(a),lightBox({contId:"create_new",close:"closeBtn",firstFocus:"forFocus",contWidth:850,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",hideCallBack:function(){$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),parseScript("create_new"),tagManagerMailTemplate(),$n("#fromListingPage").val(1),
//createMailTemplateDD('mailTemplatesStr');
createMailTemplateValidation(),$n("#previewMailFromCreateLB").attr("rel",$n("#mailTemplateId").val());var b=" "+$n("#templateJson").val(),c=" "+$n("#preSelected").val();generateDropDown(trim(b),trim(c))}})}function createMailTemplateDD(a){if("excelupload"==SOURCE)return!1;var b=$n("#"+a).val(),c=JSON.parse(b),d=c[$n("#templateType").val()];d&&(d=d[0]);var e={id:{prefill:[d]},maxHeight:100,placeHolderText:"Select from existing status change template",onClickReq:function(a,b,c){prefillMailTemplate(b)}};new DD(e)}function prefillMailTemplate(a){selectedTemp=$n.trim($n("#hid_prefill").val()),$n(this).ajaxReq({type:"get",async:"true",datatype:"text",
// url: createMailTemplate + '?mailTemplateId=' + selectedTemp + '&action=prefill&tempType='+$n('#templateType').val(),
url:createMailTemplate+"?mailTemplateId="+selectedTemp+"&action=prefill&tempType="+$n("#templateType").val(),success:function(a){$n("#mailSubjectBody").html(a),tagManagerMailTemplate();var b=" "+$n("#templateJson").val(),c=" "+$n("#preSelected").val();""!=trim(b)&&generateDropDown(trim(b),trim(c))}})}function createTemplateDD(a){var b=$n("#"+a).val(),c=JSON.parse(b),d={id:{prefill:[c]},Checkbox:!1,max_height:100,placeHolderText:"Please choose a template",onClickReq:function(a,b,c){prefillTemplate(b)}};new DD(d)}function validateForm(){
//This has to be changed
return!0}function get_radio_value(){for(var a=document.getElementsByName("tempType"),b=0;b<a.length;b++)if(a[b].checked)return a[b].value}function showHideCategory(){2!=$n("#templateType").val()?$n("#templateCat").hide():$n("#templateCat").show()}function createMailTemplateValidation(){var a=$n.browser();"msie"==a.name&&a.version<8&&setPlaceholderDynamically({mailTemplateName:"First time communcation with job seeker",mailTemplateSubject:"You might like this job"}),commonValidator.validate({formNames:"createMailTemplate",errors:commonErrList,styles:{errorClass:"msg_errf",okClass:"ok",softMandClass:"softMand"},clearOnFocus:!1,inlineErrors:!0,defaultEvents:["submit"],submitButton:["saveMailTemplateBtn"]})}function showPreviewFromLB(){"4"==$n("#frmSendMail #templateType").val()&&setIsIncludeFieldsValue(),$editor.viewSrc();var a=getBodyWithoutHtmlTags($editor.cInput.val());return""!=trim($n("#mailTemplateSubject").val())&&$n("#mailTemplateSubject").val()!=$n("#mailTemplateSubject").attr("placeholder")&&""!=a&&"<br>"!=a&&void $n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:mailTemplatePreviewFromLB,
// data: 'mailBody=' + encodeURIComponent($editor.cInput.val()) + '&templateType=' + $n('#templateType').val() + '&fieldJson=' + $n('#fieldJSON').val() + '&isIncludeFields=' + $n('#isIncludeFields').val() + '&includeFieldsCount=' + $n('#includeFieldsCount').val()+ '&excelTemplateId=' + $n('#hid_prefillTemp').val(),
data:"mailBody="+encodeURIComponent($editor.cInput.val())+"&templateType="+$n("#frmSendMail #templateType").val()+"&fieldJson="+$n("#fieldJSON").val()+"&isIncludeFields="+$n("#isIncludeFields").val()+"&includeFieldsCount="+$n("#includeFieldsCount").val()+"&excelTemplateId="+$n("#hid_prefillTemp").val()+"&maskingDetails="+$n("#maskingDetails").val()+"&maskingBatchId="+$n("#maskingBatchId").val(),success:function(a){$n("#mailPreviewBlock").html(a),$n("#mailBodyData ul").css({listStyle:"disc",paddingLeft:"15px"}),$n("#mailBodyData ol").css({paddingLeft:"15px"}),lightBox({trigger:"mailPreviewTrig",contId:"mailPreview",close:"closeBtn6",contWidth:746,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1"}),$("#mailPreview .close_btn").css({opacity:0}),$("#mailPreviewBlock .gray_btn").click(hideLayer)}})}function validateMailBody(){$editor.viewSrc(),err="";var a=getBodyWithoutHtmlTags($editor.cInput.val());return""!=a&&"<br>"!=a||(err="Required Field can not be left blank"),trim(a).length>1e4&&(err=" Mail body can not be more than 10000 characters"),err}function changeHeading(a){1==a?$n("#mailTemplateHeading").html("<p>Message</p>"):2==a?$n("#mailTemplateHeading").html("<p>Status Change</p>"):3==a&&$n("#mailTemplateHeading").html("<p>Send a requirement</p>")}function editorInt(){setTimeout(function(){$editor=new editorWindow,"appInbox"==SOURCE?$editor.createEditor(AC_CSS_PATH+"/editor.css","","mailTemplateBody","$editor","project_detail","mailTemplateSubject","sendMailBtn"):$editor.createEditor(AC_CSS_PATH+"/editor.css","","mailTemplateBody","$editor","project_detail","tagsForSubject","tagsForBody");new emailTagCreator({ancId:"#tagsLists2",editorRef:$editor,formElm:!1,callBack:emilcall});$n($editor.objContDoc).addEvent("keyup",function(){enableDisablePreview()}),enableDisablePreview(),$n("#forFocus").setFocus(),"undefined"!=typeof SOURCE&&"excelupload"==SOURCE&&($n($editor.objContDocBody).html($n($editorExcel.objContDocBody).html()),enableDisablePreview())},100)}function emilcall(){enableDisablePreview()}function tagManager(){editorInt();var a=(showHidemMenuDD({linkId:"#tagsForSubject",containerId:"#insertCont1"}),showHidemMenuDD({linkId:"#tagsForBody",containerId:"#insertCont2"}),new emailTagCreator({ancId:"#tagsLists1",editorRef:"#mailTemplateSubject",formElm:!0,callBack:emilcall}),new tabbing);a.init("insertCont1");var b=new tabbing;b.init("insertCont2"),addEventOnSubjectTags(),addEventOnBodyTags()}function enableDisablePreview(){$editor.viewSrc();var a=!0;"appInbox"==SOURCE&&($n("#hid_SendMailProjectList").val()&&""!=$n("#hid_SendMailProjectList").val()||(a=!1));var b=getBodyWithoutHtmlTags($editor.cInput.val());a&&""!=trim($n("#mailTemplateSubject").val())&&$n("#mailTemplateSubject").val()!=$n("#mailTemplateSubject").attr("placeholder")&&(""!=b&&"<br>"!=b||""!=getBodyWithoutHtmlTags($n("#editortxtArea").val()))?("undefined"!=typeof sendMailFormId&&$n("#previewMailFromCreateLB").addEvent("click",handleSendEmailPreview),$n("#previewMailFromCreateLB").removeClass("disable")):($n("#previewMailFromCreateLB").removeEvent("click",handleSendEmailPreview),$n("#previewMailFromCreateLB").addClass("disable"))}function addEventOnSubjectTags(){$n("#Candidate_subject a").addEvent("click",function(){setTimeout(function(){enableDisablePreview()},200)})}function addEventOnBodyTags(){$n("#Candidate_body a").addEvent("click",function(){setTimeout(function(){enableDisablePreview()},200)})}function getBodyWithoutHtmlTags(a){var b=a;return b=b.replace(/\n/g," "),b=b.replace(/<br>/gi," "),b=b.replace(/<br \/>/gi," "),b=trim(b),mailBody=$n.trim(a.replace(/\r\n/g,"\n")),mailBody=cleanupString(mailBody),mailBody}function actionOnCategoryChange(a){
//createMailTemplateDD(id);
// if ($n('#templateType').val() == 2 && SOURCE != 'excelupload'){
2==$n("#frmSendMail #templateType").val()&&"excelupload"!=SOURCE&&clearSubjectBody()}function clearSubjectBody(){$n("#mailTemplateSubject").val(""),showPlaceHolder("mailTemplateSubject","You might like this job"),$n($editor.objContDocBody).html("")}function handleSendEmailPreview(a){(0!=$n("#maskingDetails").length&&$n("#maskingDetails").isChecked()||0!=$n("#shouldAddSummary").length&&$n("#shouldAddSummary").isChecked()||0!=$n("#shouldAddLogo").length&&$n("#shouldAddLogo").isChecked())&&0==isGreaterThan100&&templateType==forwardMailType?openMaskingPreviewLightBox(a):showSendEmailPreview()}function showSendEmailPreview(a,b,c,d){if($n("#sltType").length>0)var e=$n("#sltType").val();else var e=$n("#facetForm input[name='slt']").val();var f=sendMailFormId,g=sendEmailMailSend,h=$n("#frmSendMail #templateType").val();if(4==h){if("true"==$n("#simpleText").val()){var j=$n("#newContactObj").val();if(""!=j)var k=JSON.parse(j);var l=$n("#contactListJson").val(),m=JSON.parse(l),n=$n("#hid_contactLst").val(),o=[];if(""!=n){var p=JSON.parse(n);for(i=0;i<p.length;i++)""!=j&&k[p[i]]?o.push(k[p[i]]):o.push(m[p[i]])}var q=$n("#hid_ccObjectList").val(),r=[];if(0!=$n("#hid_ccObjectList").length&&""!=$n("#hid_ccObjectList").val()){var s=JSON.parse(q);for(i=0;i<s.length;i++)""!=j&&k[s[i]]?r.push(k[s[i]]):r.push(m[s[i]])}var t=o.toString(),u=r.toString()}else var t=$n("#toId").val(),u=$n("#ccId").val();if(t.length>0)var v=validateEmail(t);if(""!=u)var w=validateEmail(u);x?$n("#SendMailProjectList_err").hide():$n("#SendMailProjectList_err").show(),v?($n("#to_sendMail_err").hide(),$n("#toId").removeClass("msg_errf")):($n("#to_sendMail_err").show(),$n("#toId").addClass("msg_errf"),$n("#to_sendMail_err").addClass("msg_errf"),$n("#to_sendMail_err").html("Please add valid email address.")),""==u||w?($n("#to_sendMailcc_err").hide(),$n("#ccId").removeClass("msg_errf")):($n("#to_sendMailcc_err").show(),$n("#ccId").addClass("msg_errf"),$n("#to_sendMailcc_err").addClass("msg_errf"),$n("#to_sendMailcc_err").html("Please add valid email address."))}var x=validateProjectList(),y=validateMailBody();if($n("#templateName").length>0&&$n("#templateName").attr("rel","required:1001,custom:3003"),$n("#templateName").length>0&&$n("#templateName").attr("rel",""),$n("#previewValidateTrigger").currObj().click(),!commonValidator.isValid(f)||""!=y)return""!=y?($n("#mailTemplateBody_err").show(),$n("#mailTemplateBody_err").html(y)):($n("#mailTemplateBody_err").html(""),$n("#mailTemplateBody_err").hide()),!1;$editor.viewSrc(),$n("#bodyContent").val($editor.cInput.val()),$editor.viewSrc(),4==$n("#templateType").val()&&$n("#selFields").length>0&&(assignValuestoHiddenForPreview(makeAjax),assignValuestoHiddenForPreview(makeAjax,fieldsPrefix));var z=getBodyWithoutHtmlTags($editor.cInput.val());if(""==trim($n("#mailTemplateSubject").val())||$n("#mailTemplateSubject").val()==$n("#mailTemplateSubject").attr("placeholder")||""==z||"<br>"==z)return!1;var A,B=!1,C=0;showLoader("_bodyContent",!1),$n("#attachprFieldsExcl").length&&(A=$n("#attachprFieldsExcl").isChecked()?1:0),$("#includeSignature")&&$("#includeSignature")[0]&&$("#includeSignature")[0].checked&&(B=!0),$n("#showCompanyName").length&&$n("#showCompanyName").isChecked()&&(C=1);var D=window.selectedTokenMapping,E=$('input[name="applicationId"]').val();if(!Object.keys(window.selectedTokenMapping).length&&E&&applicationTokenOnPage){var F=E.split(",");D={},F.forEach(function(a){D[a]=applicationTokenOnPage[a]})}$n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:g+"?mailPreview=1&deletedMaskingIds="+a+"&deletedAppIds="+b+"&deletedProfileIds="+c+"&maskingBatchId="+maskingBatchId+"&undoDeleteAppIds="+d,
//data: 'bodyContent=' + encodeURIComponent($editor.cInput.val()) + '&templateType=' + $n('#templateType').val() + '&projectid=' + $n('#hid_SendMailProjectList').val() + '&subject=' + $n('#mailTemplateSubject').val() + '&chkSendEmailCopy=' + $n('#chkSendEmailCopy').isChecked()
data:"bodyContent="+encodeURIComponent($editor.cInput.val())+"&templateType="+$n("#frmSendMail #templateType").val()+"&projectid="+$n("#hid_SendMailProjectList").val()+"&subject="+$n("#mailTemplateSubject").val()+"&chkSendEmailCopy="+$n("#chkSendEmailCopy").isChecked()+"&shouldAddLogoInEmail="+$n("#chkAddLogoInEmail").isChecked()+"&chkSaveTemplate="+$n("#chkSaveTemplate").isChecked()+"&name="+$n("#mailTemplateName").val()+"&mailTemplateId="+$n("#hid_mailTemplateList").val()+"&candidateProfileIdForSendMail="+$n("#candidateProfileIdForSendMail").val()+"&applicationId="+$n("#applicationId").val()+"&jobid="+$n("#hid_SendMailjobList").val()+"&to_sendMail="+$n("#to_sendMail").val()+"&from_sendMail="+$n("#from_sendMail").val()+"&fieldOrder="+$n("#fields").val()+"&excelTemplateId="+$n("#hid_prefillTemp").val()+"&isIncludeFields="+$n("#isIncludeFields").val()+"&includeFieldsCount="+$n("#includeFieldsCount").val()+"&sltEmail="+e+"&showCompanyName="+C+"&maskingDetails="+$n("#maskingDetails").val()+"&attachprFieldsExcl="+A+"&includeRecruiterSignature="+B+(window.selectedTokenMapping?"&authTokenMapping="+JSON.stringify(D):"&token="+window.pageToken),success:function(a){if(hideLoader(),1==IsJsonString(a)){if(errorArr=JSON.parse(a),0==errorArr.status)for(key in errorArr)"subject"==key?($n("#mailTemplateSubject_err").html(errorArr[key]),$n("#mailTemplateSubject").addClass("msg_errf"),$n("#mailTemplateSubject_err").addClass("msg_errf")):"body"==key?($n("#mailTemplateBody_err").html(errorArr[key]),$n("#mailTemplateBody_err").addClass("msg_errf"),$n("#mailTemplateBody_err").show()):"name"==key?($n("#mailTemplateName_err").html(errorArr[key]),$n("#mailTemplateName_err").addClass("msg_errf"),$n("#mailTemplateName_err").show()):"project"==key?($n("#SendMailProjectList_err").show(),$n("#SendMailProjectList_err").html(errorArr[key])):"email"==key?($n("#to_sendMail_err").show(),$n("#to_sendMail").addClass("msg_errf"),$n("#to_sendMail_err").addClass("msg_errf"),$n("#to_sendMail_err").html(errorArr[key])):"email_from"==key&&($n("#from_sendMail_err").show(),$n("#from_sendMail").addClass("msg_errf"),$n("#from_sendMail_err").addClass("msg_errf"),$n("#from_sendMail_err").html(errorArr[key])),$n("#"+key).addClass("msg_errf"),$n("#"+key+"_err").addClass("msg_errf")}else{$n("#SendMailProjectList_err").html(""),$n("#SendMailProjectList_err").hide(),$n("#sendEmailPreview").html(a),$n("#hid_deletedProfIds").val(c),lightBox({trigger:"EmailPreview",contId:"EmailPreview",close:"closeBtn00",contWidth:746,ecp:!0,fixedLayer:!1,returnFocus:!0,fLink:"flink1",hideCallBack:function(){$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),$("#closeBtn00").css({opacity:0}),$("#sendEmailPreview .gray_btn").click(hideLayer);var b=$n("#EmailPreview");$("#EmailPreview").ready(function(){b.currObj().style.width=null,b.currObj().style.maxWidth="1000px",b.currObj().style.minWidth="746px"}),$(window).trigger("resize"),$("html, body").animate({scrollTop:$("#EmailPreview").offset().top},0)}}})}function IsJsonString(a){try{JSON.parse(a)}catch(b){return!1}return!0}function getShareContactMailLightBoxForListing(a,b){var c=getCheckedProfiles(),d=c.toString(),e=getCheckedProfilesApplicationIds(c),f=e.toString();getShareContactMailLightBox(a,b,f,d)}function getShareContactMailLightBox(a,b,c,d){$n(this).ajaxReq({type:"post",async:"true",datatype:"text",url:b,data:"mailType="+a,success:function(a){if(1==IsJsonString(a)){errorArr=JSON.parse(a);try{0==errorArr.status?($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").addClass("perror"),$n("#statusChangeMessageDiv").html(errorArr.msg),hideLayer()):($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html(errorArr.msg),hideLayer())}catch(b){}}else $n("#sendEmailBlock").html(a),$n("#candidateProfileId").val(d),$n("#applicationId").val(c),lightBox({contId:"create_new",close:"closeBtn",firstFocus:"forFocus",contWidth:730,ecp:!0,fixedLayer:!1,returnFocus:!1,fLink:"flink1",hideCallBack:function(){$n("#excelTemplate").length&&$n("#excelTemplate").html("")}}),parseScript("sendEmailBlock"),$("#sendEmailBlock .gray_btn").click(hideLayer)}})}function validateSendRecruiterDetail(a,b,c){""==c?($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html("Mobile No. not found."),hideLayer()):submitSendRecruiterDetail(a,b,c)}function submitSendRecruiterDetail(a,b,c){submitFormWithParamsNoIframe(a,b,function(a){if(resp=a.responseText,1==IsJsonString(resp)){errorArr=JSON.parse(resp);try{1==errorArr.status?($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html(errorArr.msg),hideLayer()):($n("#statusChangeMessageDiv").show(),$n("#statusChangeMessageDiv").html(errorArr.msg),hideLayer())}catch(b){}}})}function tagManagerMailTemplate(){if($n("#mailSubjectBody").length>0){editorIntMailTemplate();var a=(showHidemMenuDD({linkId:"#tagsForSubject",containerId:"#insertCont1"}),showHidemMenuDD({linkId:"#tagsForBody",containerId:"#insertCont2"}),new emailTagCreator({ancId:"#tagsLists1",editorRef:"#mailTemplateSubject",formElm:!0,callBack:emilcall}),new tabbing);a.init("insertCont1");var b=new tabbing;b.init("insertCont2"),addEventOnSubjectTags(),addEventOnBodyTags()}}function editorIntMailTemplate(){setTimeout(function(){$editor=new editorWindow,"appInbox"==SOURCE?$editor.createEditor(AC_CSS_PATH+"/editor.css","","mailTemplateBody","$editor","project_detail","mailTemplateSubject","sendMailBtn"):$editor.createEditor(AC_CSS_PATH+"/editor.css","","mailTemplateBody","$editor","project_detail","tagsForSubject","tagsForBody");new emailTagCreator({ancId:"#tagsLists2",editorRef:$editor,formElm:!1,callBack:emilcall});$n($editor.objContDoc).addEvent("keyup",function(){enableDisablePreview()}),enableDisablePreview(),$n("#forFocus").setFocus(),"undefined"!=typeof SOURCE&&"excelupload"==SOURCE&&($n($editor.objContDocBody).html($n($editorExcel.objContDocBody).html()),enableDisablePreview())},100)}function attachEventForTag(a){$n("#"+a+" input").addEvent("keyup",function(b){if(13==b.keyCode||188==b.keyCode)if(""!=$n(this).val().trim()&&","!=$n(this).val().trim()){if("noData"==$n("#ul_"+a).childrens().attr("class")){tgCount++;var c=a+"_new"+tgCount;if(188==b.keyCode)var d=$n(this).val(),e=d.split(","),f=e[0];else var f=$n(this).val();newContacts["new"+tgCount]=f,$n("#newContactObj").val(JSON.stringify(newContacts)),$n(this).val(""),"ccObjectList"==a?(contactCcDD.CreateTags(f,c,a,!1,!1),addCloseEvent(c,tgCount,"ccObjectList"),$n("#dp_ccObjectList").currObj().style.display="none",contactCcDD.focusEv.call($n("#inp_ccObjectList").currObj(),b)):(contactDD.CreateTags(f,c,a,!1,!1),addCloseEvent(c,tgCount,"contactLst"),$n("#dp_contactLst").currObj().style.display="none",contactDD.focusEv.call($n("#inp_contactLst").currObj(),b))}}else $n(this).val("")})}function addCloseEvent(a,b,c){$n("#tg_"+a).childrens(".dCross").addEvent("click",function(){$n(this).parent().remove();var a=JSON.parse($n("#hid_"+c).val()),d=a.indexOf("new"+b);a.splice(d,1),0==a.length?$n("#hid_"+c).val(""):$n("#hid_"+c).val(JSON.stringify(a))})}function hideShowNameSection(){$n("#saveAsNew").currObj().checked?$n("#nameSection").show():$n("#nameSection").hide()}function setIsIncludeFieldsValue(){$n("#isIncludeFieldschk").currObj().checked?$n("#isIncludeFields").val("1"):$n("#isIncludeFields").val("0")}function attachRadioBtnEvnt(){$n("#configuredMailServer").toggleClass("salected-radioBtn"),$n("#csmMailServer").toggleClass("salected-radioBtn"),changeTextForSendEmail()}function changeTextForSendEmail(){0==$n("input[name*='sendMailServer']:checked").val()?($n("#senderMailCaption").html("Receive Reply On"),$n("#senderMailIdMsg").show(),$n("#senderMailId").removeAttr("disabled"),$n("#senderMailId").val(fromemail)):($n("#senderMailCaption").html("Reply to Mail Id"),$n("#senderMailIdMsg").hide(),$n("#senderMailId").val(username),$n("#senderMailId").attr("disabled",!0))}function updatePassword(a,b,c){var d={};d.fields={withCredentials:!0},submitFormWithParams("updatePasswordForSmtp",a,function(a){var d=JSON.parse(a.responseText);d.status?(hideLayer(),openForwardMailLB("",d.mailType,b,c),document.getElementById("userMailServer").checked=!0,changeTextForSendEmail()):showErrorMsgDivForUpdatePassword(d.msg)},d)}function showErrorMsgDivForUpdatePassword(a){$n("#password_err").html(a),$n("#password_err").css({display:"block"})}function updatePasswordCancelClickHandler(){$("#defaultMailServer").prop("checked",!0)}
//$n('.tip_card_throbber').click(function(event){
function openThrobberMsg(a,b){b.stopImmediatePropagation(),"undefined"!=typeof throbElem&&(throbElem.hide(),throbElem.parent().parent().parent().childrens(".throbbing").show()),$n(a).hide();var c=a.parentElement.parentElement.offsetLeft,d=screen.width-c,e=$n(a).attr("data-id");throbElem=$n(a).parent().parent().childrens(".msgThrob"),throbElem.html(htmlString[e]),throbElem.show(),d<400&&$n(".introjs-tooltip").css({"min-width":d-30+"px"}),attachEventForThrobb()}function attachEventForThrobb(){
// btn.addEventListener('click', function() { console.log(i); });
$n(".introjs-nextbutton").click(function(a){a.stopImmediatePropagation();var b=$n(this).parent().parent().parent().parent().childrens("div").eq(0).childrens(".throbbing").attr("id");$n(this).ajaxReq({type:"post",data:"iconId="+b,url:updateThrobbingListURL,success:function(a){var b=JSON.parse(a);1==b.status&&(
//$n('.msgThrob').hide();
throbElem.hide(),$n("#"+b.iconId).parent().html(""))}})}),$n(".introjs-skipbutton").click(function(a){a.stopImmediatePropagation(),$n(this).parent().parent().parent().hide(),$n(this).parent().parent().parent().parent().childrens(".throbbing").show()}),$n(".introjs-tooltiptext").click(function(a){a.stopImmediatePropagation()})}
// });
function initProgressController(){/*function drawInactive(iProgressCTX){
                iProgressCTX.lineCap = 'square';

                //outer ring
                iProgressCTX.beginPath();
                iProgressCTX.lineWidth = 15;
                iProgressCTX.strokeStyle = '#e1e1e1';
                iProgressCTX.arc(137.5,137.5,129,0,2*Math.PI);
                iProgressCTX.stroke();

                //progress bar
                iProgressCTX.beginPath();
                iProgressCTX.lineWidth = 0;
                iProgressCTX.fillStyle = '#e6e6e6';
                iProgressCTX.arc(137.5,137.5,121,0,2*Math.PI);
                iProgressCTX.fill();

                //progressbar caption
                iProgressCTX.beginPath();
                iProgressCTX.lineWidth = 0;
                iProgressCTX.fillStyle = '#fff';
                iProgressCTX.arc(137.5,137.5,100,0,2*Math.PI);
                iProgressCTX.fill();

            }*/
function a(a,b,c){var d=a.getContext("2d"),e=Math.PI/2,f=2*b*Math.PI-e,g=0-e;a.width=a.width,d.lineCap="square",d.beginPath(),d.lineWidth=8,d.strokeStyle="#00B4FF",d.arc(137.5,137.5,50,g,f),d.stroke(),c.text(parseInt(100*b,10)+"%")}var b=$("#progressController"),c=$(".progress-bar p"),d=document.getElementById("inactiveProgress"),e=document.getElementById("activeProgress");d.getContext("2d");b.on("change",function(){f=$(this).val()/100,a(e,f,c)});var f=b.val()/100;a(e,f,c)}function showProgressLoader(){$("#_bodyContent").prepend('<div class="overlayerProgress"><div id="page" class="page">  <div class="progress-bar">  <canvas id="inactiveProgress" class="progress-inactive" height="275px" width="275px"></canvas>    <canvas id="activeProgress" class="progress-active"  height="275px" width="275px"></canvas>    <p>0%</p> </div><div id="progressControllerContainer"> <input type="range" id="progressController" min="0" max="100" value="0" /> </div></div></div>')}function hideProgressLoader(){$(".overlayerProgress").remove()}function stopAddToReq(a){clearInterval(a)}function updateProgressLoader(a,b){var c=$("#progressController"),d=parseInt(a/b*100);c.val(d),c.trigger("change")}function showProgressPendingMessage(){var a='<div class="psuccess">  <a class="msgClose" onclick="hideStatusChangeSuccessMsg()" href="javascript:void(0);"> ×</a>  <div class="oh pb10">  <em></em><span class="etxt"><span>Process initiated. Duplicate applies will be blocked based on duplicate settings. Refer previous tab after sometime. </span><br></span>  </div> <div id="statusDataMsgDisplayDiv"> </div> <div id="statusDataFormDisplayDiv"> </div> </div>',b=window.location.href.split("?")[1];"pendingMessage"===b&&($("#statusChangeMessageDiv").append(a),$("#statusChangeMessageDiv").show())}commonErrList[1002]=function(a){rtn=!1;var b=/^[a-zA-Z][a-zA-Z ]*[a-zA-Z]$/;return""==a.val()||b.test(a.val())||(rtn="Enter a valid name"),{msg:rtn,id:a.attr("id")+"_err"}},commonErrList[5005]=function(a){for(var b=a.val(),c=b.split(","),d=!1,e=0;e<c.length;e++)checkEmail(c[e])||(d="Please add valid email address");return{msg:d,id:"to_sendMail_err"}},commonErrList[5006]=function(a){var b=a.val(),c=!1;return checkEmail(b)||(c="Please add valid email address"),{msg:c,id:"from_sendMail_err"}},commonErrList[5009]=function(a){var b=a.val(),c=!1;return""===b||checkSenderMail(b)||(c="Please add valid email address"),{msg:c,id:"from_sendMail_err"}},commonErrList[9010]=function(a){rtn=!1;var b=/^[a-zA-Z0-9\s\.\#\{\}\_\@\-\,\$\&\/\[\]\(\)]+$/;return b.test(a.val())||(rtn="Special characters other than . # @ _ { } - , $ & / [ ] ( ) are not allowed"),{msg:rtn,id:a.attr("id")+"_err"}};var previewFlag=!1,DataForMasking="",bulkInterview=!1,tgCount=0,newContacts={};$n(document).ready(function(){var a=$n(".throbb");for(i=0;i<a.length;i++)a.eq(i).parent().parent().css({overflow:"visible"})});var htmlString={1001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Email</h2>Two types of Email can be sent to jobseekers.<br><br><span class="blue">Send Message</span> Send messages to applicants about the recruitment process. You can now add Candidate Tags and personalize these mails <br><br><span class="blue">Send Requirement</span>Send Requirement allows you to share these Requirement/Job details with potential applicant base<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a<a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1002:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Add to Requirement</h2> You can now copy a candidate\'s profile from one Requirement to another.<br><br><span class="blue">Requirement</span>Requirement is a super-set of a Job. A Requirement inherits all properties of a Job and tracks all applications sourced for that position in one place.<br><br><span class="blue">Selecting a pipeline stage</span> When copying profiles from one Requirement/Job to another, select a pipeline status to track these profiles better<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1003:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>User-defined Star Rating</h2> Give custom star-rating to every candidate profile you evaluate.<br><br><span class="blue">Star Rating of Applicants</span>Star Rating for every applicant is automatically calculated basis relevance of the applicant’s profile to the applied job.<br><br><span class="blue">Custom Star Rating</span> Recruiter can update the star rating of the applicant as per observed relevance for the role. All ratings provided for that application can also be viewed here.<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1004:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Applicant Pipelining</h2>You can now shortlist applicants, reject or pipeline them against respective stages from their profile tuple, individually.<br><br><span class="blue">Pipeline Stages supported</span><b>Prospect:</b> Mark those profiles as Prospect which you feel might be relevant for the job but need further scrutiny<br><b>Applied-Matching:</b> Applications that match the PAF settings are marked as Matching by default<br><b>Shortlisted:</b> Mark initially screened and evaluated candidates as Shortlisted<br><b>Interview-Round 1:</b>Pipeline candidates for Interviews and send them Calendar Invites for the process<br><b>Interview-Round 2:</b>Pipeline candidates for further interview rounds if necessary<br><b>Interview-Round 3:</b> Pipeline candidates for further interview rounds if necessary<br><b>Offers & Joining – Offered:</b> Mark candidates as Offered those who have been selected for the position. You can also enter their Offer details<br><b>Offers & Joining – Joined:</b> Candidates are marked as Joined if they have accepted the offer and finally joined<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1005:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Profile Activity Filter for Applicants</h2> Recruiters can filter out and view applications based on certain activities performed on them.<br><br><span class="blue">Processed by Me</span>  Filter out only those applicant profiles which you have already viewed, sent emails to, contacted/called, pipelined for further stages, provided a star rating or downloaded resume. <br><br><span class="blue">Processed by Anyone</span>Filter out and identify those applicant profiles which have already been processed by other recruiters for that particular Job/Requirement<br><br><span class="blue">Not Yet Processed</span>Filter out and work on only those applicant profiles which have not been processed be any recruiter for that particular Job/Requirement</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1006:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Application Date Filter</h2> Recruiters can filter out and view applicant profiles based on the date of application to that Job.<br><br><span class="blue">Filter on pre-defined date ranges</span>View only those candidate’s profiles who have applied “Today”, in the last few days, or the last few months.<br><br><span class="blue">Filter on custom date range</span>Choose a custom calendar date and view all candidates who have applied in that date range<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1007:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Current Location Filter</h2>Recruiters can now filter out and view applicant profiles based on their current location.<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',1008:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Added By Filter</h2>You can also track applicants basis which recruiter is responsible for sourcing them for the Job/Requirement.<br><br><span class="blue">Applications Added By Active Recruiters</span> Active Recruiters are sub-users in Naukri who currently have eApps permissions. Applications that are sourced by these recruiters can be filtered out using this option.<br><br><span class="blue">Applications Added By Inactive Recruiters</span>Inactive Recruiters are sub-users in Naukri who no longer have permissions to access responses in eApps. Applications that are sourced by these recruiters can also be filtered out using this option<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',2001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Managing Folders</h2>Create new folders and manage already existing ones.<br><br><span class="blue">Creating new Folders</span> Click on the Post/Create button and select the “New Requirement” option. Fill up the Requirement name, provide Visibility settings for folder and continue. <br>A Folder is a Requirement which has only candidate profiles associated with it but no jobs.<br><br><span class="blue">Editing Folder name</span> Click on Modify option present against already created folders, select the “Edit” option and you can edit the name of previously created folders</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',2002:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Search for profiles across select Folders</h2>You can click on one or more of these folders and trigger a search for suitable profiles that may be available in these folders by clicking on the “Search Selected Requirements” button.</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',2003:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Set Visibility of Folders</h2>Control which recruiters have visibility to the folders created in eApps<br><br><span class="blue">Selecting Visibility</span> Select the folder which you want to share/un-share from recruiters, click on the “Set Visibility” button and select one of the following modes:<br><b>Visible to Only Me:</b> This setting ensures that the folder is not shared with any other recruiter in the system. Only the super-user will additionally be able to see the Folder.<br><b>Visible to All:</b> This ensures that the folder is visible to all the recruiters in the system.<br><b>Visible to Selected People:</b> Allows you to share the folder with only a few recruiters from the list of all recruiters who have eApps permissions.</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',3001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Create New Email Templates</h2>Create templates that you need for sending out emails to candidates<br><br><span class="blue">Select type of Email Template</span>You can add 3 types of email templates using the system:<br>1.Message<br>2.Status Change<br>3.Send a Requirement<br><br><span class="blue">Provide Email template details</span>Provide a name to the template, configure sender mail id, provide subject and mail body details and save the template</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',3002:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Search for created templates</h2>Quickly search for the templates that you have already created by providing the name of the template in the “Quick Search Templates” search box</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',4001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Choose Requirement for OMJ</h2>Source CVs from other medium for the positions that you are hiring for<br><br><span class="blue">Select an already existing position that you are hiring for</span>Click on the “Select a Requirement” drop-down and choose the Requirement for which you are sourcing these CV<br><br><span class="blue">Select a new position that you want to hire for</span>Click on the “Add New” button, provide the “Title” of the Requirement for which you are hiring, fill in other relevant details, choose the “Visibility” of the Requirement and continue</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',4002:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Select Medium to Source from</h2>You can select existing Medium from which to source applications for your Requirement or you can create new Mediums too<br><br><span class="blue">Choose an existing Medium</span>All existing Medium in your system will be displayed under the “Choose Vendor” section. Click on the checkbox against any vendor/medium name and select that medium<br><br><span class="blue">Create a New Medium</span>Click on the “Add Vendor” link displayed under the “Choose Vendor” section. Enter the name of the medium in the “Name of Vendor” text-box. In case you are sourcing CVs for the position from an external Vendor, enter the Name of the Vendor and his/her Email Id in the “Email ID” text-box and Save and continue<br><br><span class="blue">URL created to source CVs</span>Once the required Medium or Vendor is/are selected, a URL is created for the same and this can be used to source the necessary CVs. This is present under the “Vendor Selected” section.<br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',5001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Duplicate Check on Email</h2>When uploading a candidate’s resume, you can now check upfront if the candidate’s profile already exists in your system.<br>Enter the Email Id of the candidate in the “Email” field. If the candidate’s profile already exists, the system prompts the same and displays which other Requirements/Jobs the profile is mapped to already.</div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>',6001:'<div class="introjs-tooltip"><div class="introjs-tooltiptext"><h2>Managing Reports</h2>The super-user gets access to a highly detailed report that tracks all Jobs/Requirements that are being worked on in the system<br><br><span class="blue">Viewing Saved Report</span>You have the option to create and save one report to track the activities performed in your system. You can view these details by clicking on the “View” link.<br><br><span class="blue">Editing Saved Report</span>You can also edit the metrics that your report should track. Just click on the “Edit” link and you can select from the following options:<br>1. Selecting Recruiters<br>2. Selecting Sources<br>3. Selecting Requirements<br>4. Selecting Requirements basis their Status<br>5. Selecting Columns to show in the Report<br>6. Selecting Time Period of the Report<br>7. Selecting Type of the Report – Hourly, Daily or Consolidated<br>8. Type mode of viewing the Report – On Screen, Downloadable, or Scheduled<br><br></div><div class="introjs-arrow top"></div><div class="introjs-tooltipbuttons"><a class="introjs-button introjs-skipbutton" href="javascript:void(0);">Skip</a><a href="javascript:void(0);" class="introjs-button introjs-nextbutton red_btn">Done</a></div></div>'};$n(document).ready(function(){showProgressPendingMessage()});