var DD=function(a,b,c,d){function f(a){var b,c;a||(a=window.event),c=a.srcElement||a.target,"undefined"!=typeof DD.G&&"undefined"!=typeof DD.G[0]&&(b=Z(c.parentNode,DD.G[0]),DD.G[1]==b||1!=DD.G[3]||DD.openLayer[DD.G[1]]||1==DD.G[3]&&(hideDD(DD.G[1]),DD.G[1]=DD.G[0],ddSugVar=1))}function g(b){// to append data dynamically at run time in Dropdown
for(u(),i=0;i<P.idLen;i++){var c=P.idKey[i];w(c),DD.Chkbox[c]&&!DD.TagSpCnt[c]&&$n("#"+c+" ul.DDsearch").addEvent("click",function(){$n(this).parent().parent().attr("id")}),$n("#Arw_"+c).addEvent("click",function(a){var b=$n(this).attr("id").split("_")[1];"block"==$n("#dp_"+b).currObj().style.display?(hideDD(b),$n(this).toggleClass("DDarwUp","DDarwDwn")):($n(this).toggleClass("DDarwDwn","DDarwUp"),$n("#inp_"+b).setFocus())})}if(P.clrId)
// clear all tags and data on html tag fire event
for(var d in P.clrId)$n("#"+d).addEvent("click",function(b){var c=$n(this).attr("id");"msie"==P.brw.name?c=c?c:$n(this).parent().attr("id"):"";var d,e=P.clrId[c];if(e.id){var f=e.id;for(y in f)if(d=$n("#hid_"+f[y]).attr("value"),""!=d&&0!=d.length){var g=f[y];d=JSON.parse(d),$n("#hid_"+g).attr("value",""),DD.Chkbox[g]?H(g):"",DD.Allflg[g]="",P.SetInputText(g),a.dependent?X[g](a,""):""}}e.clrCalbackfun&&P.onClearTag[c](a,0,$n(this),d)})}function h(a){var b=$n(this).attr("id").split("_")[1];"none"==$n("#dp_"+b).currObj().style.display&&z(b)}function j(b){var c=DD.G[0];if(!DD.TagSpCnt[c]&&DD.Chkbox[c]?$n("#"+c+" .tagit:last").removeClass("TagSelected"):"",!DD.Chkbox[c]){var d,e=$n("#hid_"+c),f=$n("#inp_"+c),g=n(e.attr("opt")),h=e.attr("value"),i=a.id[c][0];d=g?i[g][h]:i?i[h]:"",f.val()?d&&f.val(d).css({color:"#444"}):(e.val(""),DD.plcHold[c]&&f.val(DD.plcHold[c]).css({color:"#999"}))}}function k(a){a||(a=window.event);var b,c=a.which||a.keyCode,d=$n(this).attr("id"),e=d.split("_")[1],f=$n("#"+e).width()-15,g=$n("#"+d).val().replace(/\b/g,"");if(13!=c&&38!=c||
//for multiple select
$n.preventDefault(a),13!=c||0!=DD.G[3]||DD.Chkbox[e]||
// for single select
$n("#dFrom").currObj().submit(),9==c||27==c?hideDD(e):"",// check why it is not work no keyUp
dropDisp=$n(this).getStyle($n("#dp_"+e).currObj(),"display"),8==c?DD.Chkbox[e]&&!DD.TagSpCnt[e]&&g&&0!=DD.tag[e]&&(b=M(f),$n("#inp_"+e).css({width:b+"px"})):(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57)&&!DD.TagSpCnt[e]&&DD.Chkbox[e]&&0!=DD.tag[e]&&(b=L(f),$n("#inp_"+e).css({width:b+"px"})),!g&&DD.Chkbox[e]){
//must be put code at keyDown event
var h=$n("#"+e+" .tagit:last"),i=h.attr("id");DD.TagCnt[e]>0&&8==a.keyCode&&!DD.TagSpCnt[e]&&i.length>0?U[e]?(G(i,e,"",!0),U[e]=0):($n(document.getElementById(i)).addClass("TagSelected"),U[e]=1):i.length>0&&($n(document.getElementById(i)).removeClass("TagSelected"),U[e]=0)}if(40==c)
// down arrow key
if("none"==dropDisp)hideDD(DD.G[1]),z(e);else{var j,k=DD.curActElm.next();k.length>0&&!k.hasClass("noData")&&(j=k.hasClass("optgroup")?k.next():k,DD.curActElm.removeClass("active"),j.addClass("active"),DD.curActElm=j,E(e))}else if(38==c){
// up arrow key
var j,k=DD.curActElm.prev();k.length>0&&(j=k.hasClass("optgroup")?k.prev():k,j&&(DD.curActElm.removeClass("active"),j.addClass("active"),DD.curActElm=j,E(e)))}}/* function SetInputText(id) {
        var midVal;
        if (DD.Allflg[id] == "all") {
            midVal = "all"
        } else {
            midVal = DD.TagCnt[id]
        }
        if (DD.TagCnt[id]) {
            DD.TagSpCnt[id] || DD.tag[id] == false ? $n('#inp_' + id).val(DD.preTxt[id] + ' ' + midVal + ' ' + DD.postTxt[id]) : ''
        } else if (!$n('#hid_' + id).val()) {
            $n('#Crx_' + id).hide()
            DD.plcHold[id] ? $n('#inp_' + id).val(DD.plcHold[id]).css({color: '#999'}) : ''
        }
    }*/
function l(a){return a.replace(" ","xSpacex")}function n(a){return a.replace("xSpacex"," ").replace("xSlashX","/")}function o(a,b,c,d){return c=c?'bindTo="'+c+'"':"",d=d?'class="'+d+'"':"",a=l(a),'<li class="pickVal" '+c+'><a href="javascript:void(0)" '+d+' id="'+a+'">'+b+"</a></li>"}function p(a,b){var c=0;for(x in DD.ChkBoxContr[b])a==DD.ChkBoxContr[b][x]&&(c=1);return!!c}function q(a,b,c,d){
// n is only avail in CASE of optGroup
var e=0;for(x in DD.ChkBoxContr[a]){e=1;break}if(e)return d?p(a+"_"+d+"_"+b+"_"+c,a)?"chkd":"":p(a+"_"+b+"_"+c,a)?"chkd":""}function r(a){return a?a.replace(/\_/g,"undrxxscr"):""}function s(a){return a?a.replace(/undrxxscr/gi,"_"):""}function t(b,c,d){var e="",f=[],g="",h=0,i=0;/*mustbe Defined null*/
for(var j in DD.Ary[b])for(var k in DD.Ary[b][j]){var l=J(k),n=$n.trim(r(l.replace(/\//gi,"xSlashX").replace(/\-/gi,"HxF")));if("indexOf"!=k)if("object"==typeof DD.Ary[b][j][k]){
//optgroup case
e+='<li class="optgroup" id=opt_'+n+" bindTo="+j+">"+k+"</li>",h++;for(m in DD.Ary[b][j][k]){var p=J(m);if(c[b])if(c[b][m]){var s;if(c[b][m]?s=m:"",s===m){O=m,g=DD.Ary[b][j][k][m];var t=j?b+"_"+p+"_"+n+"_"+j:b+"_"+p+"_"+n,u=[g,t,b,p];f[i++]=u,h++,e+=o(b+"_"+p+"_"+n,DD.Ary[b][j][k][m],j)}}else{d===m&&(O=m,g=DD.Ary[b][j][k][m]),h++;var v=q(b,n,j,p);e+=o(b+"_"+p+"_"+n,DD.Ary[b][j][k][m],j,v)}else{d===m&&(O=m,g=DD.Ary[b][j][k][m]);var v=q(b,n,j,p);e+=o(b+"_"+p+"_"+n,DD.Ary[b][j][k][m],j,v),h++}}}else
// without optgroup case case
if(DD.Chkbox[b]){
//checkBox Case
var s="";if(c&&(c[b][k]?s=k:""),s==k){var u=[DD.Ary[b][j][k],b+"_"+n+"_"+j,b,k];f[i++]=u,e+=o(b+"_"+n,DD.Ary[b][j][k],j,"chkd"),h++}else{var v=q(b,n,j,p);e+=o(b+"_"+n,DD.Ary[b][j][k],j,v),h++}}else
//single Select without optgroup and without checkbox
a.id[b][1]==k?(e+=o(b+"_"+n,DD.Ary[b][j][k]),O=k,g=DD.Ary[b][j][k],h++):(e+=o(b+"_"+n,DD.Ary[b][j][k]),h++)}if(DD.Chkbox[b]&&0==P.tagsSorting){var w=[],x=0;for(var y in d)for(var z in f)f[z][3]==y&&(w[x++]=f[z]);f=w}return[e,h,f,g]}function u(){for(var e=[],f=0;f<P.idLen;f++){var g=P.idKey[f];if(DD.Chkbox[g]){var h={};if(a.id[g][1])for(ky in a.id[g][1])h[a.id[g][1][ky]]="1"}else h=a.id[g][1];e[g]=h,O="";optBinding=0;if(a.dependTo){for(x in b.id)V[f]=x;if("Checked"==c)0!=$n("#dp_"+g).length?(DD.NLi[g]=t(g,e,h),$n("#dp_"+g+" ul").html(DD.NLi[g][0]),C(g)):(DD.NLi[g]=t(g,e,h),v(g,DD.NLi[g][0],f,DD.NLi[g][3]));else if(0==$n("#dp_"+V[f]+" ul li a.chkd").length){$n("#"+g+" ul").removeClass("brBotN"),$n("#dp_"+g).remove(),$n("#hid_"+g).val(""),// can't remove because of name attribute missing
$n("#ifrm_"+g).remove();var i=$n("#inp_"+g).val("").clone();$n("#inp_"+g).remove(),setTimeout(function(){$n("#"+g+" div ul li.frst").append(i)},10),0==P.srchBx?$n("#"+g+" div.DDwrap").css({display:"block"}):"",H(g),DD.NLi[g]=[],DD.Ary[g]={},DD.Ary[g]={}}else{var j=0;$n("#dp_"+g+" ul li").each(function(){if($n(this).attr("bindTo")==d){var a=$n(this).childrens("a");if(a.length>0){var b=a.attr("id");a.hasClass("chkd")&&(delete DD.ChkBoxContr[g][n(b.split("_")[1])],G("tg_"+b+"_"+J(d),g,a.html(),!0))}j++,$n(this).remove()}}),delete DD.Ary[g][d],DD.NLi[g][1]=DD.NLi[g][1]-j}}else $n("#hid_"+g).val().length>0&&(
// when user call dd form at trigger(eg:onClick) many times , then to solve the prefill duplicate problem
$n("#hid_"+g).val(""),H(g),// need to apply condition not to call this function
DD.ChkBoxContr[g]={}),DD.NLi[g]=t(g,e,h),v(g,DD.NLi[g][0],f,DD.NLi[g][3]);if(DD.liCntrFx[g]=DD.liCntr[g]=DD.NLi[g][1],B(g),"Unchecked"!=c&&DD.Chkbox[g]&&DD.NLi[g][2])
// create tag on prefill basis
for(var k=0;k<DD.NLi[g][2].length;k++){for(var l in a.id[g][1])if(a.id[g][1][l]==DD.NLi[g][2][k][3])break;P.CreateTags(DD.NLi[g][2][k][0],DD.NLi[g][2][k][1],DD.NLi[g][2][k][2],l)}P.SetInputText(g)}}function v(b,c,d,e){var f="",g="",i=$n("#"+b+" ul li input.srchTxt"),l=$n("#"+b+" ul.DDsearch li"),m=DD.Chkbox[b]?'class="ChkboxEnb"':"",n=i.attr("name");if(a.clearAllInside){var o="Clear All";for(x in a.clearAllInside)o=a.clearAllInside[x];f='<div class="DDclearAll" id="clrAll_'+b+'">'+o+"</div>"}0==$n("#dp_"+b).length&&(i.attr({id:"inp_"+b,name:""}),0==$n("#hid_"+b).length&&l.append('<input id="hid_'+b+'" type="hidden" name="'+n+'">'),g="<iframe id=ifrm_"+b+' class="backlayer" scrolling="no" frameborder="0" marginheight="0" marginwidth="0"></iframe>',$n("#"+b).append('<div class="drop'+(a.openDDLayer?" alwaysVisibleDD":"")+'" id="dp_'+b+'">'+f+'<ul id="ul_'+b+'" '+m+"></ul></div>"+g));var p=$n("#inp_"+b);p.val(""),$n("#hid_"+b).attr({value:""}),!DD.Chkbox[b]&&O&&($n("#hid_"+b).attr({value:O}),p.val(e).css({color:"#444"})),0==P.srchBx?($n("#"+b+" div.DDwrap").css({display:"none"}),$n("#"+b+" div.drop").css({position:"static"})):$n("#"+b+" div.drop").css({borderTop:0});
//Add events in dropDown (change addEvent scenario because of same dd call from different data (solve this issue for SM))
var q=p.currObj();q&&(p.addEvent("click",h),q.onfocus=P.focusEv,q.onkeydown=k,q.onkeyup=P.keyUpEv,q.onblur=j),
//End of addEvent
$n("#ul_"+b).html(c),c="",DD.openLayer[b]?z(b):"",C(b)}function w(a){$n("#dp_"+a+" ul li.pickVal").addEvent("mouseover",function(){DD.curActElm?"":A(a),DD.curActElm.removeClass("active"),"msie"==P.brw.name?$n(this).parent().addClass("active"):$n(this).addClass("active"),DD.curActElm=$n(this)}).addEvent("mouseout",function(){"msie"==P.brw.name?$n(this).parent().removeClass("active"):$n(this).removeClass("active")})}function z(b){
// show dropdown
$n("#"+b+" .DDsearch").addClass("brBotN"),$n("#"+b+" .drop").show();var c=$n("#"+b).width()-2+"px";$n("#ifrm_"+b).css({width:c}),$n("#dp_"+b).css({width:c}),A(b),a.openDDLayer?"":B(b),DD.G[1]=b,DD.G[3]=1}function A(a){DD.curActElm=$n("#dp_"+a+" li.pickVal:first"),DD.curActElm.addClass("active");var b=J($n("#hid_"+a).attr("value")),c=0;b&&!DD.Chkbox[a]&&(DD.curActElm.removeClass("active"),$n("#dp_"+a+" ul li").each(function(){var a,d=$n(this).childrens("a").attr("id");d.length&&(a=d.split("_"),n(a[1])==n(b)&&($n(this).hasClass("active")||(c=1,$n(this).addClass("active"),DD.curActElm=$n(this))))}),0==c&&DD.curActElm.addClass("active"))}function B(a){for(
// set max heigh of dropdown according to the user specified if user not specified the set default maximum height
var b=$n("#ul_"+a),c=$n("#ifr_"+a),d=0,e=0,f=$n("#dp_"+a+" ul li:first");e<DD.liCntr[a]&&P.sugHgt>=d&&f;)d+=f.height(),f=f.next(),e++;P.sugHgt<d?(b.css({height:P.sugHgt+"px",overflowY:"scroll"}),c.css({height:P.sugHgt+"px"})):(b.css({height:d+"px",overflowY:"auto",width:"100%"}),c.css({height:d+"px"}))}function C(b){
// On selection it select the data from the dropdown and throw to specific(on the basic of ID) text field or or any HTML tag eg. Div, span, textarea
var c;// must be initialize here
$n("#dp_"+b+" .pickVal a").addEvent("mousedown",function(d){var e="A"==$n(this).parent().currObj().nodeName?$n(this).parent().currObj():$n(this).currObj(),f=$n(e);if(DD.Chkbox[b]){var f,g=0,h=f.attr("id");if(f.hasClass("chkd")&&(g=1),c=e.innerHTML,f.hasClass("chkd")?f.removeClass("chkd"):f.addClass("chkd"),h.split("_")[1]==r(P.otherLabId))1==g?X[b](a,n(P.otherLabId),"unChecked"):X[b](a,n(P.otherLabId),"checked"),hideDD(b);else if(1==g){var i=h;$n(this).parent().attr("bindto")&&(i=h+"_"+$n(this).parent().attr("bindto")),G("tg_"+i,h.split("_")[0],c,!0)}else{var j=$n(this).parent().attr("bindto");j?h=h+"_"+j:"",P.CreateTags(c,h,b),0!=P.srchBx?setTimeout(function(){$n("#inp_"+b).setFocus()},100):""}}else 1==DD.G[3]&&D(f.html(),f.attr("id").split("_"))})}function D(b,c){
// when dropdown having a single select functionality
var d=n(c[0]),e=c[2]?c[2]:"";b=b.replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&"),$n("#inp_"+d).val(b),$n("#Crx_"+d).show(),$n("#hid_"+d).attr({value:n(s(c[1])),opt:e}),hideDD(d),X[d](a,n(c[1]))}function E(a){
//checked  // handle the dropdown scroll functionality
var b="#dp_"+a+" ul#ul_"+a,c=$n(b).height(),d=$n(b).currObj().scrollTop,e=c+d,f=DD.curActElm.position().top-$n(b).position().top+$n(b+" li").currObj().scrollTop,g=f+DD.curActElm.height();g>=e?$n(b).currObj().scrollTop=g-c>0?g-c:0:f<d&&($n(b).currObj().scrollTop=f)}function F(a,b,c){
//checked
c&&"all"==c.toLowerCase()?DD.Allflg[b]="":"";var d=$n("#hid_"+b).attr("value");if(d=JSON.parse(d),d.length>1){var e=d.indexOf(s(a));d.splice(e,1),a=JSON.stringify(d)}else $n("#clrAll_"+b).hide(),DD.TagSpCnt[b]?$n("#"+DD.TagSpCnt[b]).show():"",a="",$n("#inp_"+b).css({width:""});$n("#hid_"+b).val(a)}function G(b,c,d,e){
//checked
var f=b.replace("tg_",""),g=f.split("_"),h=4==g.length?g[0]+"_"+g[1]+"_"+g[2]:g[0]+"_"+g[1],// tgId.length=4 for optgroup case
i=$n(document.getElementById(h)),j=$n(document.getElementById(b));i.removeClass("chkd"),0!=DD.tag[c]&&j?j.remove():"",F(n(f.split("_")[1]),c,d),DD.TagCnt[c]--;for(x in DD.ChkBoxContr[c])DD.ChkBoxContr[c][x]==f&&delete DD.ChkBoxContr[c][x];e?X[c](a,n(g[1]),"Unchecked"):""}function H(a){
//checked
for(x in DD.ChkBoxContr[a]){var b,c=DD.ChkBoxContr[a][x],d=c.split("_");3==d.length?b=d[0]+"_"+d[1]:4==d.length&&(b=d[0]+"_"+d[1]+"_"+d[2]),$n("#"+b).removeClass("chkd"),$n("#tg_"+c).remove()}DD.TagSpCnt[a]?$n("#"+DD.TagSpCnt[a]).hide():"",$n("#clrAll_"+a).hide(),DD.ChkBoxContr[a]={},DD.TagCnt[a]=0}function I(a,b,c,d,f){var g="";//end of getPos if
return getPos=a.toLowerCase().indexOf(b.toLowerCase()),strLower=a.toLowerCase(),sTxtValueLower=b.toLowerCase(),spaceVal=!(strLower.indexOf(" "+sTxtValueLower)<0)&&strLower.indexOf(" "+sTxtValueLower),bracketVal=!(strLower.indexOf("("+sTxtValueLower)<0)&&strLower.indexOf("("+sTxtValueLower),slashVal=!(strLower.indexOf("/"+sTxtValueLower)<0)&&strLower.indexOf("/"+sTxtValueLower),(getPos>=0&&(spaceVal||bracketVal||slashVal)||0==getPos)&&(getPos&&(spaceVal?getPos=spaceVal+1:bracketVal?getPos=bracketVal+1:slashVal&&(getPos=slashVal+1)),new1=a.substr(0,getPos),e="<b>"+a.substr(getPos,b.length)+"</b>",new2=a.substr(getPos+b.length,a.length),KY=J(d),g=p(KY+"_"+f,c)?o(KY,new1+e+new2,f,"chkd"):o(KY,new1+e+new2,f),R++),g}function J(a){
// encode key
return escape(a.replace(/&/gi,"AxMpS").replace(/\./gi,"dot").replace(/\s/g,"SxP").replace(/\(/gi,"opBrcX").replace(/\)/gi,"clBrcX").replace(/\#/gi,"xHaXsHx").replace(/\-/gi,"HxF").replace(/\@/gi,"RxR8AT8RxR").replace(/\?/gi,"xQu3Sti0Nx"))}function n(a){
// decode key
return unescape(a.replace(/AxMpS/gi,"&").replace(/dot/gi,".").replace(/SxP/gi," ").replace(/opBrcX/gi,"(").replace(/clBrcX/gi,")").replace(/xSlashX/gi,"/").replace(/HxF/gi,"-").replace(/\xHaXsHx/gi,"#").replace(/RxR8AT8RxR/gi,"@").replace(/xQu3Sti0Nx/gi,"?"))}function L(a){
// increase texbox width while entering the character accordingly
// increase texbox width while entering the character accordingly
return a>T?T+=5:void(T+=1)}function M(a){
//Decrease texbox width while removing or deleting the charecter
if(""!=$n("#"+DD.G[0]).val()&&T>S){if(a>T)return T-=5;T-=1}}function N(a,b,c){"all"==c.toLowerCase()&&(DD.Allflg[b]="all"),a='"'+n(s(a))+'"';var d=$n("#hid_"+b).val();a=n(a),d?$n("#hid_"+b).val(d.replace("]","")+","+a+"]"):($n("#hid_"+b).val("["+a+"]"),$n("#clrAll_"+b).show(),DD.TagSpCnt[b]?$n("#"+DD.TagSpCnt[b]).show():""),P.onTagCrt[b]()}var O,P=this,R=0,S=30,T=30,U=[],V=[],W=[],X=[];P.idLen=0,P.onTagCrt=[],P.idKey=[],P.otherLabId=a.otherLabelId,P.brw=$n.browser(),P.clrId=a.clearTagId,P.depend=a.dependent,P.srchBx=a.searchBox,P.ddPlusSugg=a.ddPlusSuggestor,P.tagsSorting=a.tagsSorting,P.MrgPrfAryOrdr=a.maintianMergePrefillArrayOrder||!1,DD.Ary=DD.Ary?DD.Ary:{},P.onClearTag=[];// call back function for click on clearTag/clearAllTsg
for(P.idKey[P.idKey.length]in a.id);// set no of id's in a single call
if(// calculate the no of dropdown id's
P.idLen=P.idKey.length,1==a.tags)throw new Error('"tags" parameter only accept "false" value');if(0==a.tags&&a.tagInSepContainer)throw new Error("No need to specify this parameter, because you specify tag:false");for(i=0;i<P.idLen;i++){
//calculate the length of data associated with each dropdown id
var Y=P.idKey[i];if(U[Y]=0,// contain
DD.tag[Y]=a.tags,DD.TagCnt[Y]=0,DD.plcHold[Y]=a.placeHolderText||"",DD.TagSpCnt[Y]=a.tagInSepContainer||"",DD.openLayer[Y]=a.openDDLayer||!1,DD.preTxt[Y]=a.preText||"You have selected",DD.Allflg[Y]="",DD.postTxt[Y]=a.postText||"item(s)",DD.Chkbox[Y]=a.checkBox||!1,DD.NLi[Y]?"":DD.NLi[Y]=[],a.resetPrefillValues?
// to reset(empty checkBox Container) values to avoid prefill case... used in SM
DD.ChkBoxContr[Y]={}:DD.ChkBoxContr[Y]?"":DD.ChkBoxContr[Y]={},a.onClickReq)X[Y]=a.onClickReq;else{DD.G;X[Y]=function(a){}}W[Y]=a.onTagClick?a.onTagClick:function(){},//Call back function on tag click
P.onTagCrt[Y]=a.onTagCreate?a.onTagCreate:function(){},//call when tag create
d?(DD.Ary[Y]?"":DD.Ary[Y]={},DD.Ary[Y][d]=a.id[Y][0],DD.Ary[Y]=DD.Ary[Y]):(DD.Ary[Y]={},DD.Ary[Y].A=a.id[Y][0])}for(x in a.clearTagId)for(y in a.clearTagId[x])P.onClearTag[x]=a.clearTagId[x][y];P.sugHgt=a.maxHeight?a.maxHeight:300;var Z=function(a,b){
//checked            // this function find the parent element having the specified ID and return the parent ID
if(a){if(a.id!=b&&null!=a.id)return Z(a.parentNode,b);if(null!=a.id)return a.id}};/*Gloabla Array that contain the id of currently open Dropdowns*/
"msie"==P.brw.name&&P.brw.version<9?document.attachEvent("onclick",f):document.addEventListener("click",f),P.Fn={preserveEventafterClone:function(b,c,d,e){$n("#"+b).addEvent("click",function(b){
//remove tags by click on tag cross button
$n.stopPropagation(b),G(c,d,$n(this).parent().html().replace("<span></span>","").replace('<a href="javascript:void(0)"></a>',""),e),e?W[d](a,DD.TagCnt[d]):"",P.SetInputText(d)})}},P.createList_bindEvent=function(a){$n("#dp_"+a+" ul").html(t(a,"")[0]),DD.liCntr[a]=DD.liCntrFx[a],C(a),w(a)},P.SetInputText=function(a){var b;b="all"==DD.Allflg[a]?"all":DD.TagCnt[a],DD.TagCnt[a]?DD.TagSpCnt[a]||0==DD.tag[a]?$n("#inp_"+a).val(DD.preTxt[a]+" "+b+" "+DD.postTxt[a]).css({color:"#000"}):"":$n("#hid_"+a).val()||($n("#Crx_"+a).hide(),DD.plcHold[a]?$n("#inp_"+a).val(DD.plcHold[a]).css({color:"#999"}):"")},P.destroyDD=function(){var a=this,b=a.idKey;$n("#dp_"+b).remove(),$n("#hid_"+b).val(""),$n("#ifrm_"+b).remove()},P.focusEv=function(a){
//It fires when focus comes in dropdown text box
var b=$n(this).attr("id"),c=b.split("_")[1],d=$n(this).getStyle($n("#"+c+" .drop").currObj(),"display");//only for dd+suggestor case
for(// it check the display status(block,hide) of drop div
P.ddPlusSugg?P.reFillData(c):"",i=0;i<P.idLen;i++)if(c==P.idKey[i]&&!DD.openLayer[c]&&(DD.G[1]!=c||"block"!=d)){if(DD.G[0]=c,DD.G[1]&&DD.G[1]!=c&&!DD.openLayer[DD.G[1]]?hideDD(DD.G[1]):"",$n("#ul_"+c+" li").length<=DD.NLi[c][1]){var e=t(c,"");$n("#dp_"+c+" ul").html(e[0]),DD.liCntr[c]=DD.liCntrFx[c],C(c),w(c)}z(c)}$n("#"+b).css({color:"#444"}),DD.Chkbox[c]?$n(this).val(""):""!=DD.plcHold[c]&&$n("#"+b).val()===DD.plcHold[c]&&$n("#"+b).val("")},P.keyUpEv=function(b){
//must be put code at key_up event
b||(b=window.event);var c=$n(this).attr("id"),d=c.split("_")[1],e=b.keyCode||b.which,f=$n("#"+c).val().replace(/\b/g,"");if(13==e&&DD.curActElm.length>0&&DD.curActElm.hasClass("active")){var g=DD.curActElm.childrens("a"),h=g.attr("id"),i=g.hasClass("chkd");if(DD.Chkbox[d])if(h.split("_")[1]==r(P.otherLabId))i?(X[d](a,n(P.otherLabId),"unChecked"),g.removeClass("chkd")):(X[d](a,n(P.otherLabId),"Checked"),g.addClass("chkd")),hideDD(d);else{var j=h+"_"+DD.curActElm.attr("bindto");i?G("tg_"+j,d,g.html(),!0):(P.CreateTags(g.html(),j,d),g.addClass("chkd"))}else D(g.html(),h.split("_"))}13!=e&&32!=e&&37!=e&&38!=e&&39!=e&&40!=e&&9!=e&&27!=e&&18!=e&&(P.ddPlusSugg?callDatafromServer(f,d,e,P):P.initSearch(f,c),"none"==$n("#dp_"+d).currObj().style.display&&($n("#dp_"+d).show(),DD.G[1]=d,DD.G[3]=1))},hideDD=function(a){$n("#dp_"+a).hide(),
//$n('#reqDDTabs').parent().removeClass('dspN').addClass('dspN');
$n("#ifrm_"+a).css({height:0}),$n("#"+a+" .DDsearch").removeClass("brBotN"),$n("#"+a+" .backlayer").css({visibility:"hidden"}),DD.curActElm?DD.curActElm.removeClass("active"):"",DD.Chkbox[a]?$n("#inp_"+a).val(""):"",P.SetInputText(a),DD.G[3]=0},P.CreateTags=function(b,c,d,e,f){
//checked
var g=n(c).split("_"),h=c.split("_"),i=3==h.length?h[0]+"_"+h[1]:h[0]+"_"+h[1]+"_"+h[2];if(DD.TagCnt[d]++,!P.depend){b=b.replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&"),a.tagwithOptGroup?b="<b>"+g[2].replace("xSlashX","/").replace(/SxP/gi," ")+"</b>("+b+")":"";var j,k,m=$n("<li>").append('<span class="tagTxt">'+b+"</span>");k=l("tg_"+c);var o=DD.TagSpCnt[d];if(0!=DD.tag[d])
//when we want to crete tags
if(o){var p=m.append($n("<a>").addClass("dCross").attr({href:"javascript:void(0)"})).addClass("tagit").attr({id:k}),q=$n("#"+o).currObj();if(P.MrgPrfAryOrdr){var r=q.children[e];r?r.parentNode.insertBefore(p.currObj(),r):$n("#"+o).append(p)}else 0==DD.tag[d]?"":q.insertBefore(p.currObj(),q.firstChild);$n("#inp_"+d).css({color:"#444"}),j=k+" a.dCross"}else $n("#"+d+" ul.DDsearch").prepend(m.append($n("<span>").addClass("dCross")).addClass("tagit").attr({id:k})),$n("#inp_"+d).css({width:"30px"}),j=k+" span.dCross";$n("#"+i).addClass("chkd"),void 0==f&&(0!=DD.tag[d]?P.Fn.preserveEventafterClone(j,k,d,!0):"")}N($n.trim(g[1]),d,b),DD.ChkBoxContr[d][g[1]]=c,X[d](a,n(g[1]),"Checked",$n("#tg_"+c))},P.initSearch=function(b,c){var d="";R=0,c=c.split("_")[1];var e=DD.Ary[c];if(b){b=b.replace(/&amp;/gi,"&").replace(/[\s]+/g," ").replace(/^\s/,"");for(K in e)for(Q in e[K])if("object"==typeof e[K][Q]){
// for optgroup case
var f,g="";f=e[K][Q];for(m in f)g+=I(f[m],b,c,c+"_"+m+"_"+Q,K);g&&(d+='<li class="optgroup">'+Q+"</li>"+g,R++)}else
// for single case
d+=I(e[K][Q],b,c,c+"_"+Q,K)}else d=t(c,"")[0],R=DD.liCntrFx[c];if(!d){var h=a.noDataTxt?a.noDataTxt:"No data found in search";d='<li class="noData">'+h+"</li>",R++}$n("#dp_"+c+" ul").html(d),DD.liCntr[c]=R,B(c),A(c),C(c),w(c)},g()};DD.G=[],DD.plcHold=[],DD.TagCnt=[],DD.TagSpCnt=[],DD.openLayer=[],DD.ChkBoxContr=[],DD.preTxt=[],DD.postTxt=[],DD.liCntr=[],DD.liCntrFx=[],DD.NLi=[],DD.Ary={},DD.curActElm,DD.Chkbox=[],DD.tag=[],DD.Allflg=[],DD.orignalData=[],DD.Ary={},DD.prototype.dataFromServer=function(a){function b(a){var b=document.createElement("script");b.setAttribute("src",a),document.getElementsByTagName("head")[0].appendChild(b)}var c=this;for(c.suggestorName=a.suggestorName,c.appId=a.appId,c.maxSuggestions=a.maxSuggestions,c.URL=a.URL,c.inst=a.instance,c.dataCont=[],c.lastKeyword="",c.reFillData=function(a){DD.Ary[a]?DD.Ary[a].A=DD.orignalData[a]:"",c.createList_bindEvent(a)},c.fillArray=function(a){c.dataCont[c.lastKeyword]=a,DD.Ary[DD.G[1]].A=a,c.initSearch(c.lastKeyword,"inp_"+DD.G[1])},callDatafromServer=function(a,c,d,e){if(e.lastKeyword=a,e.lastKeyword)if(e.dataCont[e.lastKeyword])DD.Ary[c].A=e.dataCont[e.lastKeyword],e.initSearch(e.lastKeyword,"inp_"+c);else{var f=e.URL+"&q="+encodeURIComponent(e.lastKeyword)+"&app_id="+e.appId+"&suggestor="+e.suggestorName+"&offset=0&limit="+e.maxSuggestions+"&callback="+e.inst+".fillArray";b(f)}else DD.Ary[c].A=DD.orignalData[c],e.initSearch(e.lastKeyword,"inp_"+c)},i=0;i<c.idLen;i++)DD.orignalData[c.idKey[i]]=DD.Ary[c.idKey[i]].A};