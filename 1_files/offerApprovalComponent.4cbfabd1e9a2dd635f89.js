(window.rmsWebpackJsonp=window.rmsWebpackJsonp||[]).push([[14],{46:function(e,t,a){a("nNAJ"),a("sDzi"),e.exports=a("kRUf")},"5Wz/":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("z3Gn"),l=a("GZhD"),i=a("tsrO"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.approvalService=new i.a,a.hideLoader=function(){a.setState({loaderVisible:!1})},a.successCallback=function(e){a.hideLoader(),e.error?console.error("Error while loading data:",e.error):(a.setState({data:e}),a.emitApprovalData(e))},a.errorCallback=function(e){a.hideLoader(),console.error("Error while loading data:",e)},a.componentDidMount=function(){if(null===a.state.data){var e=a.props.url;e?(a.setState({loaderVisible:!0}),a.approvalService.getData(e).then(function(e){return a.successCallback(e)}).catch(function(e){return a.errorCallback(e)})):a.errorCallback("url not provided")}},a.emitApprovalData=function(e){var t=a.props.onDataAvailable;t&&t(e)},a.state={loaderVisible:!1,data:e.data||null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),c(t,[{key:"render",value:function(){var e=this.state,t=e.loaderVisible,a=e.data,n=this.props,i=(n.onDataAvailable,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(n,["onDataAvailable"]));return t||!a?r.a.createElement(l.a,null):r.a.createElement(o.a,s({},a,i))}}]),t}();t.a=u},GZhD:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n);t.a=function(){return r.a.createElement("div",{className:"dashboard-timeline-wrapper"},r.a.createElement("div",{className:"timeline-item"},r.a.createElement("div",{className:"animated-background"},r.a.createElement("div",{className:"background-masker header-right"}),r.a.createElement("div",{className:"background-masker header-bottom"}),r.a.createElement("div",{className:"background-masker subheader-right"}),r.a.createElement("div",{className:"background-masker subheader-bottom"}),r.a.createElement("div",{className:"background-masker content-first-end"}))))}},kRUf:function(e,t,a){},sDzi:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("i8i4"),l=a.n(o),i=a("5Wz/");window.renderOfferApprovalLayer=function(e,t,a,n){function o(){s.remove(),$("body").removeClass("oh")}var s=$('<div class="overlay">\n            <div class="previewTemplate">\n                <div class="previewBody">\n                    <div class="lb_head previewHead">\n                        <p class="fl">Offer Letter for Candidate</p>\n                        <a class="fr previewShutCross" style="margin-right: 5px">✖</a>\n                    </div>\n                </div>\n                <div id="ofa-layer-body"></div>\n            </div>\n        </div>');s.find("a.previewShutCross").click(o);var c=r.a.createElement(i.a,{url:e,onOfferAccepted:function(){o(),window.offerApproval.isTimeLine()?(window.loadTimeLine(),window.offerApproval.showOfferSuccessMessage("Offer approved by you")):(window.offerApproval.showOfferSuccessMessage("Offer approved by you"),window.offerApproval.updateAcceptStatusOnSrp(n,!0))},onOfferRejected:function(){o(),window.offerApproval.isTimeLine()?(window.loadTimeLine(),window.offerApproval.showOfferSuccessMessage("Offer rejected by you")):(window.offerApproval.showOfferSuccessMessage("Offer rejected by you"),window.offerApproval.updateRejectStatusOnSrp(n,!0))},onCommented:function(){o(),window.offerApproval.isTimeLine()&&window.loadTimeLine(),window.offerApproval.showOfferSuccessMessage("Comment added and mailed to approvers")},onError:function(e){console.error(e)},applicationId:t,offerKey:a,onDataAvailable:function(e){var t="Offer Letter for "+e.offerDesignation+" from "+e.companyName;s.find(".previewHead p").text(t)},commentToBeFocussed:!0});l.a.render(c,s.find("#ofa-layer-body")[0]),s.appendTo("body"),$("body").addClass("oh")}},tsrO:function(e,t,a){"use strict";var n=a("4Gi3"),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configure=function(e){return t.rejectLink=e.rejectLink,t.acceptLink=e.acceptLink,t.commentLink=e.commentLink,t.applicationId=e.applicationId,t.offerKey=e.offerKey,t},this.rejectLink="",this.acceptLink="",this.commentLink="",this.applicationId=null,this.offerKey=null}return r(e,[{key:"formatRequestObj",value:function(e){this.applicationId&&this.offerKey&&(e.data=JSON.stringify({applicationId:this.applicationId,offerKey:this.offerKey}))}},{key:"getData",value:function(e){return new Promise(function(t,a){Object(n.b)({url:e,method:"GET",success:function(e){return t(e)},error:function(e){return a(e)}})})}},{key:"sendComment",value:function(e){var t=this;return new Promise(function(a,r){var o={url:t.commentLink,type:"POST",data:JSON.stringify({message:e}),success:function(e){return a(e)},error:function(e){return r(e)}};Object(n.b)(o)})}},{key:"acceptOffer",value:function(){var e=this;return new Promise(function(t,a){var r={url:e.acceptLink,type:"POST",headers:{accept:"application/json","Content-Type":"application/json","X-HTTP-Method-Override":"PUT"},success:function(e){return t(e)},error:function(e){return a(e)}};e.formatRequestObj(r),Object(n.b)(r)})}},{key:"rejectOffer",value:function(){var e=this;return new Promise(function(t,a){var r={url:e.rejectLink,type:"POST",headers:{accept:"application/json","Content-Type":"application/json","X-HTTP-Method-Override":"PUT"},success:function(e){return t(e)},error:function(e){return a(e)}};e.formatRequestObj(r),Object(n.b)(r)})}}]),e}();t.a=o},z3Gn:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n);function o(e){var t=e.title,a=e.name,n=e.phoneNumber,o=e.mainClass;return r.a.createElement("div",{className:"spoc "+(o||"")},r.a.createElement("div",{className:"label-key"},t),r.a.createElement("div",{className:"title-medium"},a),n?r.a.createElement("div",{className:"title-medium"},n):null)}var l=a("4Gi3"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.validation=[{regex:/^[^\<]+$/,message:'Special characters "<" are not allowed'}],a.onSend=function(){var e=a.state.comment,t=a.props.onSend;""!==e?new RegExp(a.validation[0].regex).test(e)?(a.setState({commentError:!1,comment:"",commentErrorMsg:""}),t(Object(l.a)(e))):a.setState({commentError:!0,commentErrorMsg:a.validation[0].message}):a.setState({commentError:!0,commentErrorMsg:"Comment can not be empty"})},a.onChange=function(e){a.setState({comment:e.target.value})},a.state={comment:"",commentErrorMsg:"",commentError:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),s(t,[{key:"render",value:function(){var e=this.state,t=e.commentError,a=e.commentErrorMsg,n=e.comment,o=this.props,l=o.placeholder,i=o.toBeFocussed;return r.a.createElement("div",null,r.a.createElement("div",{className:"comment-area"},r.a.createElement("textarea",{className:"comment-box",autoFocus:i,cols:"30",rows:"5",maxlength:"2500",value:n,placeholder:l,onChange:this.onChange}),t?r.a.createElement("div",{className:"err-msg",id:"empty-comment-err"},a):null),r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.onSend},"Send"))}}]),t}();function u(e){var t=e.email,a=e.date,n=e.comment;return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"title"},r.a.createElement("label",null,t),r.a.createElement("span",null," on ",r.a.createElement("span",{className:"comment-date"},a))),r.a.createElement("div",{className:"content"},n))}function p(e){var t=e.comments,a=e.emptyListVisible;return t&&0!==t.length?r.a.createElement("div",{className:"previous-comments"},t.map(function(e){return r.a.createElement(u,i({key:e.id},e))})):a?r.a.createElement("div",{className:"previous-comments no-comment"},"NO COMMENTS YET"):null}function m(e){var t=e.onSend,a=e.comments,n=e.toBeFocussed,o=e.boxVisible,l=e.emptyListVisible;return r.a.createElement("div",{className:"panel comment-panel"},r.a.createElement("div",{className:"panel-title"},"Comments"),r.a.createElement("div",{className:"panel-body"},o?r.a.createElement(c,{toBeFocussed:n,placeholder:"Type your queries or comments here. A notification will be sent to everyone involved in the approval process",onSend:t}):null,r.a.createElement(p,{emptyListVisible:l,comments:a})))}var f=a("17x9"),d=a.n(f),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},b=window.imgPath5;function h(e){var t=e.sequence,a=e.name,n=e.approvers;return r.a.createElement("div",{className:"approved-content"},r.a.createElement("div",{className:"approved-title"},r.a.createElement("img",{src:"https://img.naukimg.com/s/4/124/i/approved.png"}),r.a.createElement("span",null,t,". "),r.a.createElement("span",null,a)),r.a.createElement("ul",{className:"approved-list"},n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{className:"bullet"}),r.a.createElement("span",{className:"mailId"},e.emailAddress),r.a.createElement("span",{className:"date"}," on ",e.actionDate))})))}function y(e){var t=e.data;return t&&0!==t.length?r.a.createElement("div",{className:"panel approval-history-panel"},r.a.createElement("div",{className:"panel-title"},"This offer is already approved by"),r.a.createElement("div",{className:"panel-body"},t.map(function(e){return r.a.createElement(h,v({key:e.sequence},e))}))):null}function E(e){var t=!0===e.expanded?"icon-expanded":"icon-collapsed";return r.a.createElement("span",{className:"icon "+t,onClick:e.onClick})}b=b||"./../i",h.propTypes={sequence:d.a.oneOfType([d.a.string,d.a.number]).isRequired,name:d.a.string.isRequired,approvers:d.a.array},h.defaultProps={approvers:[]};var w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.showMail=function(){a.setState({mailVisible:!a.state.mailVisible})},a.state={mailVisible:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),w(t,[{key:"render",value:function(){var e=this.props.mailBody,t=this.state.mailVisible,a={__html:e};return r.a.createElement("div",{className:"panel mail-panel"},r.a.createElement(E,{expanded:t,onClick:this.showMail}),r.a.createElement("div",{className:"panel-title",onClick:this.showMail},"Mail to be sent to candidate"),t?r.a.createElement("div",{className:"panel-body mail-body",dangerouslySetInnerHTML:a}):null)}}]),t}(),N=a("tsrO"),k=a("VBXE"),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getSalaryRange=function(){var e=a.props.data.requestDetails,t=e.minSalary,n=e.maxSalary,r=e.salaryCurrency;return-1===t||-1===n?null:a.getCurrencyUnit(r)+" "+t+" - "+n},a.getCurrencyUnit=function(e){switch(String(e).toLowerCase()){case"rupees":default:return"₹"}},a.getApprovers=function(){return a.props.data.processHistory.currentProcess.previousStages.reduceRight(function(e,t){return t.approvers.filter(function(e){return 3===e.status}).sort(function(e,t){return t.actionAtDateTime-e.actionAtDateTime}).reduce(function(e,t){return e.push(t.emailAddress),e},e),e},[])},a.getApproversText=function(){var e=a.getApprovers();return 0===e.length?"":1===e.length?e[0]:e[0]+" + "+(e.length-1)+" other(s)"},a.showPanel=function(){var e=a.state.panelVisible;a.setState({panelVisible:!e})},a.state={panelVisible:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),O(t,[{key:"render",value:function(){var e=this.props.data,t=e.requestDetails,a=t.requestName,n=t.displayId,o=t.experienceDisplayText,i=t.vacancies,s=t.workLevel,c=e.processHistory,u=e.hmSpocName,p=e.hrSpocName,m=void 0;c&&(m=c.currentProcess);var f=this.state.panelVisible,d=this.getSalaryRange();return r.a.createElement("div",{className:"panel requisition-panel"},r.a.createElement(E,{expanded:f,onClick:this.showPanel}),r.a.createElement("div",{className:"panel-title",onClick:this.showPanel},"Requisition Details"),!0===f?r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"requistion-name"},a),r.a.createElement("ul",{className:"list offer-sub-info"},r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Requistion ID: "),r.a.createElement("span",{className:"label-value"},n)),r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Hiring Manager: "),r.a.createElement("span",{className:"label-value"},u)),r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"HR SPOC: "),r.a.createElement("span",{className:"label-value"},p))),r.a.createElement("div",{className:"requisition-approved-details"},d?r.a.createElement("div",{className:"requisition-vertical-column salary-range"},r.a.createElement("div",{className:"column-key label-key"},"Annual CTC Range"),r.a.createElement("div",{className:"column-value label-value"},d)):null,o?r.a.createElement("div",{className:"requisition-vertical-column experience-range"},r.a.createElement("div",{className:"column-key label-key"},"Experience Range"),r.a.createElement("div",{className:"column-value label-value"},o)):null,i?r.a.createElement("div",{className:"requisition-vertical-column vacancy"},r.a.createElement("div",{className:"column-key label-key"},"Vacancy"),r.a.createElement("div",{className:"column-value label-value"},i)):null,s?r.a.createElement("div",{className:"requisition-vertical-column work-level"},r.a.createElement("div",{className:"column-key label-key"},"Work Level"),r.a.createElement("div",{className:"column-value label-value"},s)):null),c&&r.a.createElement("div",{className:"approved-by"},r.a.createElement("span",null,"Approved ",r.a.createElement("span",{className:"preposition"},"by "),this.getApproversText()),r.a.createElement("span",null,r.a.createElement("span",{className:"preposition"}," on")," ",Object(l.o)(m.updatedDateTime)))):null)}}]),t}(),j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getOverallFeedback=function(e){return e.form.fields.find(function(e){return 1===parseInt(e.additionalData.isDefault)})},a.getStarRatings=function(e){for(var t=[],a=1;a<=e;a++)t.push(r.a.createElement("li",{key:a,className:"feed-sprite sprite-star-full"}));for(var n=e+1;n<=5;n++)t.push(r.a.createElement("li",{key:n,className:"feed-sprite sprite-star-blank"}));return t},a.getFeedbackList=function(){var e=a.props.data.feedbackList;return e?e.map(function(e){var t=a.getOverallFeedback(e);return r.a.createElement("div",{className:"feedback-item",key:e.applicationFeedbackId},r.a.createElement("div",{className:"feedback-strip"},r.a.createElement("div",{className:"status "+("Rejected"===e.statusState?"bordrRed":"bordrGreen"),title:e.statusId},r.a.createElement("span",{className:"status-text"},e.statusId)),r.a.createElement("div",{className:"approval-status"},r.a.createElement("div",{className:"approval-state"},e.statusState," ",r.a.createElement("span",{className:"preposition"},"by ")," ",e.approverName),r.a.createElement("div",{className:"approval-date"},r.a.createElement("span",{className:"preposition"},"on ")," ",Object(l.o)(e.updatedOn))),r.a.createElement("div",{className:"star-ratings"},r.a.createElement("ul",null,a.getStarRatings(parseInt(t.answer.answer.value))))),r.a.createElement("div",{className:"feedback-comment"},t.answer.comment))}):[]},a.getMoreFeedbackLink=function(e){var t=1===e?"Feedback":"Feedbacks";return e>0?r.a.createElement("div",{className:"more-link",onClick:function(){return a.setState({showAllFeedback:!0})}},r.a.createElement("span",null,"+ ",e," More ",t)):null},a.showPanel=function(){var e=a.state.panelVisible;a.setState({panelVisible:!e})},a.state={showAllFeedback:!1,panelVisible:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),j(t,[{key:"render",value:function(){var e=this.props.data,t=e.referenceCode,a=e.createdBy,n=e.requirementName,o=this.state,l=o.showAllFeedback,i=o.panelVisible,s=this.getFeedbackList();if(0===s.length)return null;var c=s[0],u=s.length-1;return r.a.createElement("div",{className:"panel feedback-panel"},r.a.createElement(E,{expanded:i,onClick:this.showPanel}),r.a.createElement("div",{className:"panel-title",onClick:this.showPanel},1===s.length?s.length+" feedback received":s.length+" feedbacks received"),!0===i?r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"req-name"},n),r.a.createElement("ul",{className:"list requirement-details"},t?r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Ref. Code: "),r.a.createElement("span",{className:"label-value ref-code"},t)):null,r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Created by: "),r.a.createElement("span",{className:"label-value"},a))),!1===l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"feedback-list"},c),this.getMoreFeedbackLink(u)):r.a.createElement("div",{className:"feedback-list"},s)):null)}}]),t}(),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var P=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.autoProcessApproval=function(){var e=a.props.autoApproval;if(!1!==(void 0!==e&&e)&&!a.isApprovalProcessed()){var t=window.location.pathname;t.startsWith("/offer/mail/token")&&(t.endsWith("action/reject")?a.rejectOffer():t.endsWith("action/accept")&&a.approveOffer())}},a.isApprovalProcessed=function(){return!!a.state.approvalStatusText},a.shouldApprovalBtnsBeShown=function(){return!a.isApprovalProcessed()},a.hideLoader=function(){a.setState({showLoader:!1})},a.showLoader=function(){a.setState({showLoader:!0})},a.onAjaxError=function(e){a.hideLoader(),console.error(e);var t=a.props.onError;t&&t(e||"request error")},a.approveOffer=function(){a.showLoader();var e=a.props,t=e.applicationId,n=e.offerKey;a.approvalService.acceptOffer(t,n).then(function(e){if(e.error||e.responseCode&&200!==e.responseCode)a.onAjaxError(e);else{e={approvalStatusText:"Offer Approved By You",responseCode:200},a.setApprovalStatusText(e),a.hideLoader();var t=a.props.onOfferAccepted;t&&t(e)}},a.onAjaxError)},a.rejectOffer=function(){a.showLoader();var e=a.props.applicationId;a.approvalService.rejectOffer(e).then(function(e){if(e.error||e.responseCode&&200!==e.responseCode)a.onAjaxError(e);else{e={approvalStatusText:"Offer Rejected By You",responseCode:200},a.setApprovalStatusText(e),a.hideLoader();var t=a.props.onOfferRejected;t&&t(e)}},a.onAjaxError)},a.setApprovalStatusText=function(e){a.setState({approvalStatusText:e.approvalStatusText})},a.sendComment=function(e){a.showLoader(),a.approvalService.sendComment(e).then(function(e){if(e.error)a.onAjaxError(e);else{a.prependToComments(e);var t=a.props.onCommented;t&&t(e)}},a.onAjaxError)},a.prependToComments=function(e){if(e&&e.id){var t=a.state.comments;t.unshift(e),a.setState({comments:t})}a.hideLoader()},a.formatComments=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e,t){return{id:e.id||t,email:e.commentedBy.emailAddress,comment:e.message,date:Object(l.o)(e.createdDateTime)}})},a.getSalary=function(){var e=a.props,t=e.annualSalary;switch(e.annualSalaryCurrency){case"USD":return"$ "+t;case"INR":default:return"₹ "+t}},a.state={comments:e.previousComments||[],approvalStatusText:e.approvalStatusText||"",showLoader:!1},a.approvalService=new N.a,a.approvalService.configure({acceptLink:e.approveLink,rejectLink:e.rejectLink,commentLink:e.commentLink,applicationId:e.applicationId,offerKey:e.offerKey}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.PureComponent),T(t,[{key:"componentDidMount",value:function(){this.autoProcessApproval()}},{key:"render",value:function(){var e=this.props,t=e.candidateName,a=e.currentCompany,n=e.currentDesignation,l=e.offerDesignation,i=e.salary,s=e.joiningDate,c=e.recruiterName,u=e.recruiterMobile,p=e.offerMailBody,f=e.experience,d=e.annualSalary,v=e.commentToBeFocussed,b=e.isApprover,h=e.requirementDetails,E=e.requisitionDetails,w=this.props.previousStagesData,N=this.state,O=N.comments,j=N.showLoader,T=E||{},P=T.hmSpocName,A=T.hmSpocEmail,L=T.hmSpocNumber,x=T.hrSpocName,_=T.hrSpocEmail,D=T.hrSpocNumber;return w=(w||[]).sort(function(e,t){return t.sequence-e.sequence}),r.a.createElement("div",{className:"ofa wrapper"},!0===j?r.a.createElement(k.a,null):null,r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"panel top-panel"},r.a.createElement("div",{className:"label-key"},"Offer for"),r.a.createElement("div",{className:"label-value highlight-medium"},t),r.a.createElement("div",{className:"role"},r.a.createElement("span",{className:"title-medium"},n?r.a.createElement("span",null,n,", "):null,r.a.createElement("span",null,a))),f||d?r.a.createElement("ul",{className:"list offer-sub-info"},f&&""!==f?r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Experience "),r.a.createElement("span",{className:"label-value"},f)):null,d&&""!==d&&0!==Number(d)?r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Annual Salary "),r.a.createElement("span",{className:"label-value"},this.getSalary())):null):null),r.a.createElement("div",{className:"panel offer-details-panel"},r.a.createElement("div",{className:"main-info"},r.a.createElement("div",{className:"label-key"},"Offered Designation"),r.a.createElement("div",{className:"label-value highlight-lg"},l)),r.a.createElement("ul",{className:"list offer-sub-info"},r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"Offered Salary "),r.a.createElement("span",{className:"label-value"},i)),r.a.createElement("li",null,r.a.createElement("span",{className:"label-key"},"To Join on "),r.a.createElement("span",{className:"label-value"},s))),this.shouldApprovalBtnsBeShown()&&r.a.createElement("div",{className:"approval-btns"},r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.approveOffer},"Approve"),r.a.createElement("button",{className:"btn btn-primary-outline",type:"button",onClick:this.rejectOffer},"Reject")),r.a.createElement("div",{className:"spocs-list"},r.a.createElement(o,{title:"Offer raised by",name:c,phoneNumber:u}),(P||A)&&r.a.createElement(o,{title:"Hiring Manager SPOC",name:P||A,phoneNumber:L}),(x||_)&&r.a.createElement(o,{title:"HR SPOC",name:x||_,phoneNumber:D}))),r.a.createElement(g,{mailBody:p}),r.a.createElement(m,{boxVisible:!0===b,emptyListVisible:!0!==b,onSend:this.sendComment,comments:this.formatComments(O),toBeFocussed:v}),r.a.createElement(y,{data:w}),h&&r.a.createElement(C,{data:h}),E&&r.a.createElement(S,{data:E})))}}]),t}();t.a=P}},[[46,1,0]]]);