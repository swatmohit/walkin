$(function(){function a(a){var b=$(".pBlock"),c=$(".pList li a.active",b.eq(0));if(c.length>0)c.trigger("click");else{var d=$("select",b.eq(0)),e=d.val();d.val(e).trigger("change")}}function b(a){d();var b='<div class="offerSuccessMessage"><div class="psuccess"><a class="msgClose" onclick="window.offerApproval.hideOfferMessages()">×</a><div class="oh"><div class="fl mt5"><em></em> <span class="etxt"><span>'+a+"</span><br></span></div></div></div></div>";$("#stick").append(b)}function c(a){d();var b='<div class="offerErrorMessage"><div class="perror"><a class="msgClose" onclick="window.offerApproval.hideOfferMessages()">×</a><div class="oh"><div class="fl mt5"><em></em> <span class="etxt"><span>'+a+"</span><br></span></div></div></div></div>";$("#stick").append(b)}function d(){$(".offerErrorMessage").remove(),$(".offerSuccessMessage").remove()}function e(){return!!window.loadTimeLine}function f(a,b,c,d){window.renderOfferApprovalLayer(a,b,c,d)}function g(a,b){var c,d;b?(d=$(a.target).closest(".srpStatus.subStage"),c=d.find(".srp-oa-btns")):(c=$(a.target).parent(),// srp-oa-btns-wrapper
d=c.closest(".srpStatus.subStage"));var e=c.attr("data-imgPath");d.find(".enquire-offer-link").remove(),c.remove(),d.find(".candOffrStatus").remove(),d.find(".srpOfferStatusImg").remove();var f=d.find(".btnGp.current-offer-status");if(f.length>0){var g='<div class="candOffrStatus"> Offer rejected by you</div><img class="srpOfferStatusImg" src="'+e+'/red.png">';f.after(g)}}function h(a,b){var c,d;b?(d=$(a.target).closest(".srpStatus.subStage"),c=d.find(".srp-oa-btns")):(c=$(a.target).parent(),// srp-oa-btns-wrapper
d=c.closest(".srpStatus.subStage"));var e=c.attr("data-imgpath");d.find(".enquire-offer-link").remove(),c.remove(),d.find(".candOffrStatus").remove(),d.find(".srpOfferStatusImg").remove();var f=d.find(".btnGp.current-offer-status");if(f.length>0){var g='<div class="candOffrStatus"> Offer approved by you</div><img class="srpOfferStatusImg" src="'+e+'/green.png">';f.after(g)}}function i(a,d,f,g){showLoader("_bodyContent",!1),$.ajax({method:"POST",url:"/offers/process/"+(a||0)+"/action/ACCEPTED",data:JSON.stringify({applicationId:d,offerKey:f}),headers:{accept:"application/json","Content-Type":"application/json","X-HTTP-Method-Override":"PUT"},success:function(a){e()?(hideLoader(),b("You have approved this offer"),window.loadTimeLine(hideLoader)):(hideLoader(),b("You have approved this offer"),h(g))},error:function(a){hideLoader(),c("Something went wrong! Try again!!")}})}function j(a,d,f,h){showLoader("_bodyContent",!1),$.ajax({method:"POST",url:"/offers/process/"+a+"/action/REJECTED",data:JSON.stringify({applicationId:d,offerKey:f}),headers:{accept:"application/json","Content-Type":"application/json","X-HTTP-Method-Override":"PUT"},success:function(a){e()?(hideLoader(),b("You have rejected this offer"),window.loadTimeLine&&window.loadTimeLine(hideLoader)):(b("You have rejected this offer"),hideLoader(),g(h))},error:function(a){hideLoader(),c("Something went wrong! Try again!!")}})}window.offerApproval={renderEnquireOffer:f,acceptOffer:i,rejectOffer:j,refresh:a,isTimeLine:e,hideOfferMessages:d,showOfferErrorMessage:c,showOfferSuccessMessage:b,updateRejectStatusOnSrp:g,updateAcceptStatusOnSrp:h}});